<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixed Price Project Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f4f7f6;
            color: #333;
            min-height: 100vh;
        }
        .dashboard-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 32px 24px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 32px;
            font-size: 2.5em;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }
        .summary-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            padding: 24px 18px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .summary-card .label {
            font-size: 1em;
            color: #888;
            margin-bottom: 8px;
        }
        .summary-card .value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 4px;
        }
        .summary-card .sub-value {
            font-size: 1em;
            color: #aaa;
        }
        .main-chart-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            padding: 24px;
            margin-bottom: 32px;
        }
        .main-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 28px;
        }
        .card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.07);
            padding: 24px 20px;
            display: flex;
            flex-direction: column;
            min-width: 0;
        }
        .section-header {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 16px;
            font-weight: bold;
        }
        .card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .card ul li {
            padding: 8px 0;
            border-bottom: 1px dashed #eee;
        }
        .card ul li:last-child {
            border-bottom: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 0;
        }
        th, td {
            padding: 8px 6px;
            text-align: left;
        }
        th {
            background: #f4f7f6;
            font-weight: 600;
            color: #555;
        }
        tr:nth-child(even) {
            background: #fafbfc;
        }
        .status-green { color: #28a745; font-weight: bold; }
        .status-yellow { color: #ffc107; font-weight: bold; }
        .status-red { color: #dc3545; font-weight: bold; }
        @media (max-width: 1100px) {
            .main-grid { grid-template-columns: 1fr; }
            .summary-grid { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 700px) {
            .summary-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <h1>Fixed Price Project Dashboard</h1>
        <!-- Summary Section -->
         <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px;">
    <div>
        <label for="serviceCodeSelect" style="font-weight:bold;">Select Service Code:</label>
        <select id="serviceCodeSelect" style="padding:6px 12px; border-radius:4px; border:1px solid #ccc;">
            <option value="A001">A001</option>
            <option value="B002">B002</option>
            <option value="C003">C003</option>
        </select>
    </div>
    <button id="milestonesBtn" style="padding:8px 18px; border-radius:5px; border:none; background:#007bff; color:#fff; font-weight:bold; cursor:pointer;", onclick="openDashboardModal('milestonesCard')">
        Milestones
    </button>
    <button id="risksBtn" style="padding:8px 18px; border-radius:5px; border:none; background:#ffc107; color:#333; font-weight:bold; cursor:pointer;", onclick="openDashboardModal('risksCard')">
        Risks & Issues
    </button>
    <button id="teamBtn" style="padding:8px 18px; border-radius:5px; border:none; background:#28a745; color:#fff; font-weight:bold; cursor:pointer;", onclick="openDashboardModal('teamCard')">
        Team & Contacts
    </button>
</div>
        <div class="summary-grid">
            <div class="summary-card">
                <div class="label">Total Fixed Price</div>
                <div class="value">$1,000,000</div>
                <div class="sub-value">Contract Value</div>
            </div>
            <div class="summary-card">
                <div class="label">Budget Consumed</div>
                <div class="value">$750,000</div>
                <div class="sub-value">75% Used</div>
            </div>
            <div class="summary-card">
                <div class="label">Earned Value</div>
                <div class="value">$700,000</div>
                <div class="sub-value">EV as of May 2025</div>
            </div>
            <div class="summary-card">
                <div class="label">Time Elapsed</div>
                <div class="value">80%</div>
                <div class="sub-value">Project Duration</div>
            </div>
        </div>
        <!-- Main Chart -->
        <div class="main-chart-card">
            <div class="section-header">Budget vs. Actuals vs. Earned Value Over Time</div>
            <canvas id="financialChart" height="80"></canvas>
        </div>
        <!-- Main Cards Grid -->
        <div class="main-grid">
            
            
            <div class="card">
                <div class="section-header">Asset Details</div>
                <table>
                    <thead>
                        <tr>
                            <th>Asset</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Server Rack</td>
                            <td><span class="status-green">Deployed</span></td>
                        </tr>
                        <tr>
                            <td>Test Devices</td>
                            <td><span class="status-yellow">In Use</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="card">
                <div class="section-header">Change Requests</div>
                <ul>
                    <li>Open: 3</li>
                    <li>Approved: 2 ($50,000)</li>
                    <li>Rejected: 1</li>
                </ul>
            </div>
            
            <!-- ...existing cards... -->
<div class="card" id="milestonesCard">
    <div class="section-header">Attachment Details</div>
    <ul id="attachmentDetailsList" style="padding:0; margin:0;"></ul>
    <p style="font-size: 0.95em; color: #777; margin-top: 12px;">
        Access control applies to sensitive documents.
    </p>
</div>
<div class="card">
    <div class="section-header">Miscellaneous Details</div>
    <ul id="miscDetailsList"></ul>
</div>
        </div>
    </div>
    <div id="dashboardModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.35); z-index:9999; align-items:center; justify-content:center;">
    <div id="dashboardModalContent" style="background:#fff; border-radius:10px; max-width:500px; width:90%; padding:32px 24px; position:relative; box-shadow:0 4px 24px rgba(0,0,0,0.15);">
        <button onclick="closeDashboardModal()" style="position:absolute; top:12px; right:16px; background:none; border:none; font-size:1.5em; color:#888; cursor:pointer;">&times;</button>
        <div id="dashboardModalBody"></div>
    </div>
</div>
<template id="teamContactsTemplate">
    <div class="section-header">Team & Contacts</div>
    <table style="width:100%; font-size:0.98em;">
        <thead>
            <tr>
                <th>Name</th>
                <th>Role</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Organization</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Jane Doe</td>
                <td>Project Manager</td>
                <td><a href="mailto:jane.doe@example.com">jane.doe@example.com</a></td>
                <td>+1-555-123-4567</td>
                <td>Vendor</td>
            </tr>
            <tr>
                <td>John Smith</td>
                <td>Client Lead</td>
                <td><a href="mailto:john.smith@client.com">john.smith@client.com</a></td>
                <td>+1-555-234-5678</td>
                <td>Client</td>
            </tr>
            <tr>
                <td>Alex Lee</td>
                <td>Development Lead</td>
                <td><a href="mailto:alex.lee@example.com">alex.lee@example.com</a></td>
                <td>+1-555-345-6789</td>
                <td>Vendor</td>
            </tr>
            <tr>
                <td>Sarah Chen</td>
                <td>QA Lead</td>
                <td><a href="mailto:sarah.chen@example.com">sarah.chen@example.com</a></td>
                <td>+1-555-456-7890</td>
                <td>Vendor</td>
            </tr>
            <tr>
                <td>Robert Green</td>
                <td>Key Stakeholder</td>
                <td><a href="mailto:robert.green@corp.com">robert.green@corp.com</a></td>
                <td>+1-555-567-8901</td>
                <td>Client</td>
            </tr>
        </tbody>
    </table>
    <p style="font-size: 0.95em; color: #777; margin-top: 12px;">
        For urgent matters, please refer to the project communication plan.
    </p>
</template>
<template id="risksIssuesTemplate">
    <div class="section-header">Risks & Issues</div>
    <table style="width:100%; font-size:0.98em; margin-bottom:18px;">
        <thead>
            <tr>
                <th>Risk/Issue</th>
                <th>Severity</th>
                <th>Status</th>
                <th>Owner</th>
                <th>Mitigation</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Resource Availability</td>
                <td><span class="status-yellow">Medium</span></td>
                <td>Open</td>
                <td>Jane Doe</td>
                <td>Cross-train team, hire backup</td>
            </tr>
            <tr>
                <td>Scope Creep</td>
                <td><span class="status-red">High</span></td>
                <td>Open</td>
                <td>John Smith</td>
                <td>Strict change control</td>
            </tr>
            <tr>
                <td>Vendor Delay</td>
                <td><span class="status-green">Low</span></td>
                <td>Closed</td>
                <td>Alex Lee</td>
                <td>Weekly vendor review</td>
            </tr>
        </tbody>
    </table>
    <div style="margin-top:12px;">
        <canvas id="risksBarChartModal" height="120"></canvas>
    </div>
</template>
<template id="milestonesTemplate">
    <div class="section-header">Milestones</div>
    <table style="width:100%; font-size:0.98em;">
        <thead>
            <tr>
                <th>Milestone</th>
                <th>Target Date</th>
                <th>Status</th>
                <th>Owner</th>
                <th>Comments</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Design Complete</td>
                <td>2025-02-15</td>
                <td><span class="status-green">✔ Completed</span></td>
                <td>Jane Doe</td>
                <td>All design documents approved</td>
            </tr>
            <tr>
                <td>Development Complete</td>
                <td>2025-04-10</td>
                <td><span class="status-yellow">In Progress</span></td>
                <td>Alex Lee</td>
                <td>Backend 90% done, UI ongoing</td>
            </tr>
            <tr>
                <td>Testing</td>
                <td>2025-05-05</td>
                <td><span class="status-yellow">Upcoming</span></td>
                <td>Sarah Chen</td>
                <td>Test plan ready, resources assigned</td>
            </tr>
            <tr>
                <td>Go-Live</td>
                <td>2025-06-01</td>
                <td><span class="status-red">Pending</span></td>
                <td>John Smith</td>
                <td>Awaiting client sign-off</td>
            </tr>
        </tbody>
    </table>
</template>
<script>
        const serviceDetails = {
    A001: {
        attachments: [
            { type: "PDF", icon: "📄", color: "#dc3545", name: "Scope Document", size: "1.2 MB" },
            { type: "DOCX", icon: "📝", color: "#007bff", name: "Design Spec", size: "2.5 MB" },
            { type: "XLSX", icon: "📊", color: "#28a745", name: "Test Plan", size: "800 KB" },
            { type: "PDF", icon: "📄", color: "#dc3545", name: "Risk Register", size: "500 KB" }
        ],
        misc: [
            "Client Feedback Score (Last Month): 4.2/5.0",
            "Regulatory Compliance: All certifications obtained",
            "Third-Party Vendor Contracts: 3 active",
            "Travel Expenses (Current Phase): $5,500",
            "Training Hours Completed: 80 hours",
            "Contingency Utilization: 15% used"
        ]
    },
    B002: {
        attachments: [
            { type: "PDF", icon: "📄", color: "#dc3545", name: "Statement of Work", size: "1.0 MB" },
            { type: "DOCX", icon: "📝", color: "#007bff", name: "Architecture Doc", size: "1.8 MB" }
        ],
        misc: [
            "Client Feedback Score (Last Month): 4.8/5.0",
            "Regulatory Compliance: Pending",
            "Third-Party Vendor Contracts: 2 active",
            "Travel Expenses (Current Phase): $3,200",
            "Training Hours Completed: 60 hours",
            "Contingency Utilization: 10% used"
        ]
    },
    C003: {
        attachments: [
            { type: "PDF", icon: "📄", color: "#dc3545", name: "Final Report", size: "2.0 MB" }
        ],
        misc: [
            "Client Feedback Score (Last Month): 4.0/5.0",
            "Regulatory Compliance: All certifications obtained",
            "Third-Party Vendor Contracts: 1 active",
            "Travel Expenses (Current Phase): $2,000",
            "Training Hours Completed: 40 hours",
            "Contingency Utilization: 5% used"
        ]
    }
};

        // Example Chart.js line chart for Budget vs Actual vs Earned Value
        const ctx = document.getElementById('financialChart').getContext('2d');
new Chart(ctx, {
    type: 'line',
    data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
        datasets: [
            {
                label: 'Budget',
                data: [200000, 400000, 600000, 800000, 1000000],
                borderColor: '#007bff',
                backgroundColor: 'rgba(0,123,255,0.08)',
                fill: false,
                tension: 0.3
            },
            {
                label: 'Actual',
                data: [180000, 350000, 500000, 700000, 750000],
                borderColor: '#dc3545',
                backgroundColor: 'rgba(220,53,69,0.08)',
                fill: false,
                tension: 0.3
            },
            {
                label: 'Earned Value',
                data: [150000, 300000, 450000, 600000, 700000],
                borderColor: '#28a745',
                backgroundColor: 'rgba(40,167,69,0.08)',
                fill: false,
                tension: 0.3
            }
        ]
    },
    options: {
        responsive: true,
        plugins: {
            legend: { position: 'top' },
            tooltip: {
                enabled: true,
                callbacks: {
                    title: function(context) {
                        // Show the month
                        return 'Month: ' + context[0].label;
                    },
                    label: function(context) {
                        // Show the dataset label and value with currency formatting
                        return context.dataset.label + ': $' + context.parsed.y.toLocaleString();
                    }
                }
            }
        },
        scales: {
            y: { beginAtZero: true }
        }
    }
});
function renderDetails(code) {
    // Render attachments
    const att = serviceDetails[code]?.attachments || [];
    let attHtml = att.map(file => `
        <li style="display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px dashed #eee;">
            <button onclick="alert('Simulating download of ${file.name} ${file.type}');" title="Download ${file.type}" style="background:none; border:none; cursor:pointer; padding:0; margin-right:10px;">
                <span style="font-size:1.4em; color:${file.color};">${file.icon}</span>
            </button>
            <span>
                ${file.name} <span style="color:#888; font-size:0.95em;">(${file.type}, ${file.size})</span>
            </span>
        </li>
    `).join('');
    document.getElementById('attachmentDetailsList').innerHTML = attHtml;

    // Render miscellaneous
    const misc = serviceDetails[code]?.misc || [];
    let miscHtml = misc.map(item => `<li>${item}</li>`).join('');
    document.getElementById('miscDetailsList').innerHTML = miscHtml;
}
document.addEventListener('DOMContentLoaded', function() {
    const select = document.getElementById('serviceCodeSelect');
    renderDetails(select.value);
    select.addEventListener('change', function() {
        renderDetails(this.value);
    });
});
function openDashboardModal(cardId) {
    if (cardId === 'teamCard') {
        var template = document.getElementById('teamContactsTemplate');
        document.getElementById('dashboardModalBody').innerHTML = template.innerHTML;
        document.getElementById('dashboardModal').style.display = 'flex';
        return;
    }
    if (cardId === 'risksCard') {
        var template = document.getElementById('risksIssuesTemplate');
        document.getElementById('dashboardModalBody').innerHTML = template.innerHTML;
        document.getElementById('dashboardModal').style.display = 'flex';
        // Draw the bar chart in the modal
        setTimeout(function() {
            const risksBarCtx = document.getElementById('risksBarChartModal').getContext('2d');
            new Chart(risksBarCtx, {
                type: 'bar',
                data: {
                    labels: ['Resource Availability', 'Scope Creep', 'Vendor Delay'],
                    datasets: [{
                        label: 'Severity (1=Low, 2=Medium, 3=High)',
                        data: [2, 3, 1], // Medium, High, Low
                        backgroundColor: [
                            '#ffc107', // Medium
                            '#dc3545', // High
                            '#28a745'  // Low
                        ]
                    }]
                },
                options: {
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const sev = ['Low', 'Medium', 'High'];
                                    return 'Severity: ' + sev[context.raw - 1];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            min: 0,
                            max: 3,
                            ticks: {
                                stepSize: 1,
                                callback: function(value) {
                                    if (value === 1) return 'Low';
                                    if (value === 2) return 'Medium';
                                    if (value === 3) return 'High';
                                    return '';
                                }
                            }
                        }
                    }
                }
            });
        }, 100);
        return;
    }
    var card = document.getElementById(cardId);
    if (card) {
        var content = card.innerHTML;
        document.getElementById('dashboardModalBody').innerHTML = content;
        document.getElementById('dashboardModal').style.display = 'flex';
    }
    if (cardId === 'milestonesCard') {
        var template = document.getElementById('milestonesTemplate');
        document.getElementById('dashboardModalBody').innerHTML = template.innerHTML;
        document.getElementById('dashboardModal').style.display = 'flex';
        return;
    }
    var card = document.getElementById(cardId);
    if (card) {
        var content = card.innerHTML;
        document.getElementById('dashboardModalBody').innerHTML = content;
        document.getElementById('dashboardModal').style.display = 'flex';
    }

}
function closeDashboardModal() {
    document.getElementById('dashboardModal').style.display = 'none';
}
    </script>
</body>
</html>