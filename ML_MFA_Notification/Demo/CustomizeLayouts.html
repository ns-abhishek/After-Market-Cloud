<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aftermarket Shopping Cart Homepage</title>
    <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
</head>

<body>
    <div id="root"></div>
    <script type="text/babel">
        const defaultLayout = [
            { cells: 1, components: ['heroBanner'] },
            { cells: 1, components: ['cartItems'] },
            { cells: 1, components: ['vehicleFilter'] },
            { cells: 1, components: ['orderSummary'] },
            { cells: 1, components: ['topCategories'] },
            { cells: 1, components: ['recommendedProductsToBuy'] },
            { cells: 1, components: ['offersSection'] },
            { cells: 1, components: ['productsToAdd'] },
        ];

        const themes = {
            default: { bg: 'bg-white', text: 'text-black', buttonBg: 'bg-black', buttonText: 'text-white', buttonHoverBg: 'bg-white', buttonHoverText: 'text-black' },
            darkMode: { bg: 'bg-gray-900', text: 'text-white', buttonBg: 'bg-gray-700', buttonText: 'text-white', buttonHoverBg: 'bg-white', buttonHoverText: 'text-gray-900' },
            blueGradient: { bg: 'bg-gradient-to-r from-blue-500 to-blue-800', text: 'text-white', buttonBg: 'bg-blue-600', buttonText: 'text-white', buttonHoverBg: 'bg-white', buttonHoverText: 'text-blue-600' },
            warmTones: { bg: 'bg-orange-100', text: 'text-orange-900', buttonBg: 'bg-orange-500', buttonText: 'text-white', buttonHoverBg: 'bg-white', buttonHoverText: 'text-orange-500' },
            minimalGray: { bg: 'bg-gray-200', text: 'text-gray-800', buttonBg: 'bg-gray-500', buttonText: 'text-white', buttonHoverBg: 'bg-white', buttonHoverText: 'text-gray-500' },
        };

        class ErrorBoundary extends React.Component {
            state = { hasError: false };

            static getDerivedStateFromError(error) {
                return { hasError: true };
            }

            render() {
                if (this.state.hasError) {
                    return (
                        <div className="container mx-auto p-6 text-center">
                            <h2 className="text-2xl font-bold text-black">Something went wrong.</h2>
                            <p className="text-black">Please try refreshing the page or contact support.</p>
                        </div>
                    );
                }
                return this.props.children;
            }
        }

        const Header = ({ onCustomizeLayout, onCustomizeTheme, onCustomizeStyle, theme }) => {
            const [isDropdownOpen, setIsDropdownOpen] = React.useState(false);

            return (
                <header className={`${theme.bg} ${theme.text} p-4 shadow-lg relative`}>
                    <div className="container mx-auto flex justify-between items-center">
                        <h1 className="text-3xl font-bold tracking-tight">Quest Network Commerce</h1>
                        <nav className="flex items-center space-x-6">
                            <ul className="flex space-x-6">
                                <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>Home</a></li>
                                <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>Shop</a></li>
                                <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>Account</a></li>
                                <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>Support</a></li>
                            </ul>
                            <div className="relative">
                                <button
                                    onClick={() => setIsDropdownOpen(!isDropdownOpen)}
                                    className={`text-2xl ${theme.text} hover:${theme.text}/70 transition-colors`}
                                >
                                    ⚙️
                                </button>
                                {isDropdownOpen && (
                                    <div className="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg z-50">
                                        <button
                                            onClick={() => { onCustomizeLayout(); setIsDropdownOpen(false); }}
                                            className="block w-full text-left px-4 py-2 text-black hover:bg-gray-100"
                                        >
                                            Customize Layout
                                        </button>
                                        <button
                                            onClick={() => { onCustomizeTheme(); setIsDropdownOpen(false); }}
                                            className="block w-full text-left px-4 py-2 text-black hover:bg-gray-100"
                                        >
                                            Customize Theme
                                        </button>
                                        <button
                                            onClick={() => { onCustomizeStyle(); setIsDropdownOpen(false); }}
                                            className="block w-full text-left px-4 py-2 text-black hover:bg-gray-100"
                                        >
                                            Customize Style
                                        </button>
                                    </div>
                                )}
                            </div>
                        </nav>
                    </div>
                </header>
            );
        };

        const Footer = ({ theme }) => (
            <footer className={`${theme.bg} ${theme.text} p-6 mt-auto`}>
                <div className="container mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 text-center md:text-left">
                    <div>
                        <h3 className="text-lg font-semibold mb-2">About Us</h3>
                        <p className="text-sm">Your trusted source for high-quality aftermarket automotive parts since 2020.</p>
                    </div>
                    <div>
                        <h3 className="text-lg font-semibold mb-2">Quick Links</h3>
                        <ul className="space-y-1 text-sm">
                            <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>Returns</a></li>
                            <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>Shipping</a></li>
                            <li><a href="#" className={`hover:${theme.text}/70 transition-colors`}>FAQs</a></li>
                        </ul>
                    </div>
                    <div>
                        <p className="text-sm">© 2025 Aftermarket Hub. All rights reserved.</p>
                    </div>
                </div>
            </footer>
        );

        const HeroBanner = ({ theme, styles }) => (
            <section className={`p-6 rounded-lg shadow-xl h-[70vh] flex items-center ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <div className="flex flex-col md:flex-row items-center w-full h-full">
                    <div className="md:w-1/2 p-4 flex flex-col justify-center">
                        <h2 className={`text-4xl font-bold mb-4 ${theme.text}`}>Personalized Shopping Experience</h2>
                        <p className={`text-xl ${theme.text} mb-6`}>
                            Personalized home page experience with tailored product recommendations driven by your past activity and preferences. Enjoy a consistent interface across all your devices, while sellers benefit from robust branding options, including custom themes and domain names, to create a distinctive online presence.
                        </p>
                        <button className={`px-6 py-3 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm w-fit`}>
                            Shop Now
                        </button>
                    </div>
                    <div className="md:w-1/2 p-4 h-full">
                        <img
                            src="Images/DCImage.png"
                            alt="Hero Banner"
                            className="w-full h-full object-cover rounded-lg shadow-sm"
                        />
                    </div>
                </div>
            </section>
        );

        const VehicleFilter = ({ theme, styles }) => (
            <section className={`p-6 rounded-lg shadow-xl h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Find Parts for Your Vehicle</h2>
                <div className="space-y-4">
                    <div>
                        <label className={`block text-sm font-medium ${theme.text} mb-1`}>Vehicle Make</label>
                        <select className={`w-full p-3 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg focus:ring-2 focus:ring-black focus:border-black shadow-sm ${theme.bg} ${theme.text}`}>
                            <option>Toyota</option>
                            <option>Ford</option>
                            <option>Honda</option>
                        </select>
                    </div>
                    <div>
                        <label className={`block text-sm font-medium ${theme.text} mb-1`}>Vehicle Model</label>
                        <select className={`w-full p-3 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg focus:ring-2 focus:ring-black focus:border-black shadow-sm ${theme.bg} ${theme.text}`}>
                            <option>Camry</option>
                            <option>F-150</option>
                            <option>Civic</option>
                        </select>
                    </div>
                    <button className={`w-full p-3 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-md`}>
                        Search Parts
                    </button>
                </div>
            </section>
        );

        const CartItems = ({ theme, styles }) => (
            <section className={`p-6 rounded-lg shadow-xl h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Your Shopping Cart</h2>
                <div className="space-y-4">
                    <div className={`flex items-center justify-between p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg hover:bg-opacity-5 transition-colors`}>
                        <div className="flex items-center space-x-4">
                            <img src="https://m.media-amazon.com/images/I/916xfg-6-5L._AC_UY327_FMwebp_QL65_.jpg" alt="Brake Pads" className="w-16 h-16 rounded object-cover shadow-sm" />
                            <div>
                                <h3 className={`font-semibold text-lg ${theme.text}`}>Performance Brake Pads</h3>
                                <p className={`text-sm ${theme.text}`}>$59.99</p>
                            </div>
                        </div>
                        <button className={`${theme.text} hover:underline transition-colors font-medium`}>Remove</button>
                    </div>
                    <div className={`flex items-center justify-between p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg hover:bg-opacity-5 transition-colors`}>
                        <div className="flex items-center space-x-4">
                            <img src="https://m.media-amazon.com/images/I/51dvvHCNDPL._AC_UY327_FMwebp_QL65_.jpg" alt="Air Filter" className="w-16 h-16 rounded object-cover shadow-sm" />
                            <div>
                                <h3 className={`font-semibold text-lg ${theme.text}`}>High-Flow Air Filter</h3>
                                <p className={`text-sm ${theme.text}`}>$29.99</p>
                            </div>
                        </div>
                        <button className={`${theme.text} hover:underline transition-colors font-medium`}>Remove</button>
                    </div>
                </div>
            </section>
        );

        const TopCategories = ({ theme, styles }) => (
            <section className={`p-6 h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Explore Top Categories</h2>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className={`p-4 rounded-lg text-center transition-colors shadow-md ${theme.bg}`}>
                        <img src="https://www.motrparts.com/wp-content/uploads/2024/12/spark-plug.webp" alt="SPARK PLUG" className="w-full h-20 object-cover rounded mb-2 shadow-sm" />
                        <p className={`font-semibold ${theme.text}`}>SPARK PLUG</p>
                    </div>
                    <div className={`p-4 rounded-lg text-center transition-colors shadow-md ${theme.bg}`}>
                        <img src="https://www.motrparts.com/wp-content/uploads/2024/12/clutch-set.webp" alt="CLUTCH SET" className="w-full h-20 object-cover rounded mb-2 shadow-sm" />
                        <p className={`font-semibold ${theme.text}`}>CLUTCH SET</p>
                    </div>
                    <div className={`p-4 rounded-lg text-center transition-colors shadow-md ${theme.bg}`}>
                        <img src="https://www.motrparts.com/wp-content/uploads/2024/12/gas-spring.webp" alt="GAS SPRING" className="w-full h-20 object-cover rounded mb-2 shadow-sm" />
                        <p className={`font-semibold ${theme.text}`}>GAS SPRING</p>
                    </div>
                    <div className={`p-4 rounded-lg text-center transition-colors shadow-md ${theme.bg}`}>
                        <img src="https://www.motrparts.com/wp-content/uploads/2024/12/disc-rotors.webp" alt="DISC ROTOR" className="w-full h-20 object-cover rounded mb-2 shadow-sm" />
                        <p className={`font-semibold ${theme.text}`}>DISC ROTOR</p>
                    </div>
                </div>
            </section>
        );

        const EngineAndElectrical = ({ theme, styles }) => (
            <section className={`p-6 rounded-lg shadow-xl h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Engine & Electrical Parts</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div className={`flex items-center space-x-4 p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg hover:bg-opacity-5 transition-colors`}>
                        <img src="https://via.placeholder.com/80?text=Spark+Plugs" alt="Spark Plugs" className="w-20 h-20 rounded object-cover shadow-sm" />
                        <div>
                            <h3 className={`font-semibold text-lg ${theme.text}`}>Performance Spark Plugs</h3>
                            <p className={`text-sm ${theme.text}`}>$39.99</p>
                            <button className={`mt-2 px-4 py-1 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                                Add to Cart
                            </button>
                        </div>
                    </div>
                    <div className={`flex items-center space-x-4 p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg hover:bg-opacity-5 transition-colors`}>
                        <img src="https://via.placeholder.com/80?text=Alternator" alt="Alternator" className="w-20 h-20 rounded object-cover shadow-sm" />
                        <div>
                            <h3 className={`font-semibold text-lg ${theme.text}`}>High-Output Alternator</h3>
                            <p className={`text-sm ${theme.text}`}>$149.99</p>
                            <button className={`mt-2 px-4 py-1 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        );

        const ProductsToAdd = ({ theme, styles }) => (
            <section className={`p-6 h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Explore More Products</h2>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div className={`p-4 rounded-lg shadow-md transition-shadow ${theme.bg}`}>
                        <img src="https://m.media-amazon.com/images/I/61+infXEDkL._AC_UY327_FMwebp_QL65_.jpg" alt="Oil Filter" className="w-full h-50 object-cover rounded mb-2 shadow-sm" />
                        <h3 className={`font-semibold text-lg ${theme.text}`}>Premium Oil Filter</h3>
                        <p className={`text-sm ${theme.text}`}>$14.99</p>
                        <button className={`mt-2 w-full px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                            Add to Cart
                        </button>
                    </div>
                    <div className={`p-4 rounded-lg shadow-md transition-shadow ${theme.bg}`}>
                        <img src="https://m.media-amazon.com/images/I/51dsoIzMItL._AC_UY327_FMwebp_QL65_.jpg" alt="LED Headlights" className="w-full h-50 object-cover rounded mb-2 shadow-sm" />
                        <h3 className={`font-semibold text-lg ${theme.text}`}>LED Headlight Kit</h3>
                        <p className={`text-sm ${theme.text}`}>$89.99</p>
                        <button className={`mt-2 w-full px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                            Add to Cart
                        </button>
                    </div>
                    <div className={`p-4 rounded-lg shadow-md transition-shadow ${theme.bg}`}>
                        <img src="https://m.media-amazon.com/images/I/617AJGkTxsL._AC_UY327_FMwebp_QL65_.jpg" alt="Exhaust Tip" className="w-full h-50 object-cover rounded mb-2 shadow-sm" />
                        <h3 className={`font-semibold text-lg ${theme.text}`}>Stainless Exhaust Tip</h3>
                        <p className={`text-sm ${theme.text}`}>$34.99</p>
                        <button className={`mt-2 w-full px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                            Add to Cart
                        </button>
                    </div>
                </div>
            </section>
        );

        const OrderSummary = ({ theme, styles }) => (
            <section className={`p-6 rounded-lg shadow-xl h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Your Order Summary</h2>
                <div className="space-y-3">
                    <div className={`flex justify-between ${theme.text}`}>
                        <span>Subtotal:</span>
                        <span>$89.98</span>
                    </div>
                    <div className={`flex justify-between ${theme.text}`}>
                        <span>Shipping:</span>
                        <span>$5.00</span>
                    </div>
                    <div className={`flex justify-between font-semibold text-lg ${theme.text}`}>
                        <span>Total:</span>
                        <span>$94.98</span>
                    </div>
                    <button className={`w-full mt-4 px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-md`}>
                        Proceed to Checkout
                    </button>
                </div>
            </section>
        );

        const RecommendedProductsToBuy = ({ theme, styles }) => (
            <section className={`p-6 rounded-lg shadow-xl h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Must-Have Recommendations</h2>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div className={`p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg transition-shadow`}>
                        <img src="https://m.media-amazon.com/images/I/515Ux39aQJL._AC_UL480_FMwebp_QL65_.jpg" alt="Cold Air Intake" className="w-full h-70 object-cover rounded mb-2 shadow-sm" />
                        <h3 className={`font-semibold text-lg ${theme.text}`}>Cold Air Intake System</h3>
                        <p className={`text-sm ${theme.text}`}>$199.99</p>
                        <button className={`mt-2 w-full px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                            Add to Cart
                        </button>
                    </div>
                    <div className={`p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg transition-shadow`}>
                        <img src="https://m.media-amazon.com/images/I/51Nm5nHWtuL._AC_UY327_FMwebp_QL65_.jpg" alt="Fuel Injectors" className="w-full h-70 object-cover rounded mb-2 shadow-sm" />
                        <h3 className={`font-semibold text-lg ${theme.text}`}>High-Performance Fuel Injectors</h3>
                        <p className={`text-sm ${theme.text}`}>$129.99</p>
                        <button className={`mt-2 w-full px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                            Add to Cart
                        </button>
                    </div>
                    <div className={`p-4 border ${theme.text === 'text-white' ? 'border-white' : 'border-black'} rounded-lg transition-shadow`}>
                        <img src="https://m.media-amazon.com/images/I/61TKpJ-bCZL._AC_UY327_FMwebp_QL65_.jpg" alt="Turbocharger" className="w-full h-70 object-cover rounded mb-2 shadow-sm" />
                        <h3 className={`font-semibold text-lg ${theme.text}`}>Turbocharger Kit</h3>
                        <p className={`text-sm ${theme.text}`}>$499.99</p>
                        <button className={`mt-2 w-full px-4 py-2 ${theme.buttonBg} ${theme.buttonText} rounded-lg hover:${theme.buttonHoverBg} hover:${theme.buttonHoverText} hover:border hover:border-black transition-colors shadow-sm`}>
                            Add to Cart
                        </button>
                    </div>
                </div>
            </section>
        );

        const OffersSection = ({ theme, styles }) => (
            <section className={`p-6 h-full ${theme.bg} ${styles.shadow} ${styles.border} ${styles.animation} ${styles.hover}`}>
                <h2 className={`text-2xl font-bold mb-4 ${theme.text}`}>Exclusive Offers</h2>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div className={`p-6 rounded-lg flex items-center space-x-4 transition-shadow ${theme.bg}`}>
                        <img src="https://eauto.co.in/cdn/shop/collections/collection-clutch-assembly_300x.jpg?v=1607740299" alt="Offer 1" className="w-50 h-50 rounded object-cover shadow-sm" />
                        <div>
                            <h3 className={`font-semibold text-lg ${theme.text}`}>20% Off Performance Parts</h3>
                            <p className={`text-sm ${theme.text}`}>Use code PERF20 at checkout. Valid until May 31, 2025.</p>
                        </div>
                    </div>
                    <div className={`p-6 rounded-lg flex items-center space-x-4 transition-shadow ${theme.bg}`}>
                        <img src="https://eauto.co.in/cdn/shop/files/brake-disc-plate-eauto-co-in_300x.jpg?v=1613574284" alt="Offer 2" className="w-50 h-50 rounded object-cover shadow-sm" />
                        <div>
                            <h3 className={`font-semibold text-lg ${theme.text}`}>Free Shipping on Orders Over $100</h3>
                            <p className={`text-sm ${theme.text}`}>Limited time offer. Shop now!</p>
                        </div>
                    </div>
                </div>
            </section>
        );

        const DraggableItem = ({ name, componentKey }) => (
            <div
                draggable
                onDragStart={(e) => e.dataTransfer.setData('component', componentKey)}
                className="p-2 bg-white text-black border border-black rounded-lg cursor-move text-center hover:bg-black hover:text-white transition-colors shadow-sm"
            >
                {name}
            </div>
        );

        const DropZone = ({ sectionIndex, cellIndex, value, onDrop, isEmpty }) => {
            const handleDrop = (e) => {
                e.preventDefault();
                const component = e.dataTransfer.getData('component');
                if (component) {
                    onDrop(sectionIndex, cellIndex, component);
                }
            };

            const handleDragOver = (e) => {
                e.preventDefault();
            };

            return (
                <div
                    onDrop={handleDrop}
                    onDragOver={handleDragOver}
                    className={`p-4 border-2 border-dashed border-black rounded-lg min-h-[100px] flex items-center justify-center ${isEmpty ? 'bg-gray-100' : 'bg-white'}`}
                >
                    <div className="text-center">
                        <div className="text-sm text-black">Cell {cellIndex + 1}</div>
                        <div className="font-medium text-black">{isEmpty ? 'Drop here' : value}</div>
                    </div>
                </div>
            );
        };

        const PreviewModal = ({ isOpen, onClose, layoutConfig, theme, styles }) => {
            if (!isOpen) return null;

            const components = {
                heroBanner: <HeroBanner theme={theme} styles={styles} />,
                vehicleFilter: <VehicleFilter theme={theme} styles={styles} />,
                cartItems: <CartItems theme={theme} styles={styles} />,
                topCategories: <TopCategories theme={theme} styles={styles} />,
                engineAndElectrical: <EngineAndElectrical theme={theme} styles={styles} />,
                productsToAdd: <ProductsToAdd theme={theme} styles={styles} />,
                orderSummary: <OrderSummary theme={theme} styles={styles} />,
                recommendedProductsToBuy: <RecommendedProductsToBuy theme={theme} styles={styles} />,
                offersSection: <OffersSection theme={theme} styles={styles} />,
                empty: null,
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div className="bg-white p-6 rounded-lg w-[90vw] h-full flex flex-col shadow-xl">
                        <div className="flex justify-between items-center mb-4">
                            <h2 className="text-2xl font-bold text-black">Preview Homepage</h2>
                            <button
                                onClick={onClose}
                                className="px-4 py-2 bg-black text-white rounded-lg hover:bg-white hover:text-black hover:border hover:border-black transition-colors shadow-sm"
                            >
                                Close Preview
                            </button>
                        </div>
                        <div className="flex-grow overflow-y-auto border border-black rounded-lg p-4 shadow-inner">
                            <Header theme={theme} />
                            <main className="container mx-auto p-6">
                                <div className="space-y-6">
                                    {layoutConfig.map((section, sectionIndex) => (
                                        <div
                                            key={sectionIndex}
                                            className={`grid gap-4 ${section.cells === 1
                                                    ? 'grid-cols-1'
                                                    : section.cells === 2
                                                        ? 'grid-cols-1 md:grid-cols-2'
                                                        : section.cells === 3
                                                            ? 'grid-cols-1 md:grid-cols-3'
                                                            : 'grid-cols-1 md:grid-cols-4'
                                                }`}
                                        >
                                            {section.components.map((component, cellIndex) => (
                                                <div key={cellIndex} className="min-h-[200px]">
                                                    {components[component]}
                                                </div>
                                            ))}
                                        </div>
                                    ))}
                                </div>
                            </main>
                            <Footer theme={theme} />
                        </div>
                    </div>
                </div>
            );
        };

        const LayoutModal = ({ isOpen, onClose, onSave, layoutConfig, setLayoutConfig, addSection, removeSection, theme, styles }) => {
            const [isPreviewOpen, setIsPreviewOpen] = React.useState(false);
            const [tempLayoutConfig, setTempLayoutConfig] = React.useState(JSON.parse(JSON.stringify(layoutConfig)));

            if (!isOpen) return null;

            const predefinedLayouts = {
                default: defaultLayout,
                minimal: [
                    { cells: 1, components: ['heroBanner'] },
                    { cells: 1, components: ['vehicleFilter'] },
                    { cells: 1, components: ['productsToAdd'] },
                ],
                cartFocused: [
                    { cells: 1, components: ['heroBanner'] },
                    { cells: 2, components: ['cartItems', 'orderSummary'] },
                    { cells: 1, components: ['recommendedProductsToBuy'] },
                ],
            };

            const handleLayoutChange = (e) => {
                const selectedLayout = e.target.value;
                setTempLayoutConfig([...predefinedLayouts[selectedLayout]]);
            };

            const handleCellCountChange = (sectionIndex, newCellCount) => {
                const newConfig = [...tempLayoutConfig];
                const currentComponents = newConfig[sectionIndex].components;
                newConfig[sectionIndex] = {
                    cells: parseInt(newCellCount),
                    components: Array(parseInt(newCellCount)).fill('empty').map((_, i) => currentComponents[i] || 'empty'),
                };
                setTempLayoutConfig(newConfig);
            };

            const handleDrop = (sectionIndex, cellIndex, component) => {
                const newConfig = [...tempLayoutConfig];
                newConfig[sectionIndex].components[cellIndex] = component;
                setTempLayoutConfig(newConfig);
            };

            const handleAddSection = (index) => {
                const newConfig = [...tempLayoutConfig];
                newConfig.splice(index, 0, { cells: 1, components: ['empty'] });
                setTempLayoutConfig(newConfig);
            };

            const handleRemoveSection = (index) => {
                if (tempLayoutConfig.length <= 1) return;
                const newConfig = [...tempLayoutConfig];
                newConfig.splice(index, 1);
                setTempLayoutConfig(newConfig);
            };

            const handleReset = () => {
                setTempLayoutConfig(JSON.parse(JSON.stringify(defaultLayout)));
                setLayoutConfig(JSON.parse(JSON.stringify(defaultLayout)));
                onSave();
                onClose();
            };

            const handleSave = () => {
                setLayoutConfig(tempLayoutConfig);
                onSave();
                onClose();
            };

            const handleCancel = () => {
                onClose();
            };

            const componentNames = {
                empty: 'Empty Section',
                heroBanner: 'Hero Banner',
                cartItems: 'Shopping Cart',
                topCategories: 'Top Categories',
                engineAndElectrical: 'Engine & Electrical Parts',
                productsToAdd: 'Explore More Products',
                orderSummary: 'Order Summary',
                recommendedProductsToBuy: 'Must-Have Recommendations',
                offersSection: 'Exclusive Offers',
                vehicleFilter: 'Vehicle Filter',
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div className="bg-white p-6 rounded-lg w-full max-w-2xl max-h-full overflow-y-auto shadow-xl">
                        <h2 className="text-2xl font-bold mb-4 text-black">Customize Layout</h2>
                        <div className="space-y-4">
                            <div className="mb-4">
                                <h3 className="text-lg font-semibold mb-2 text-black">Choose Layout Template</h3>
                                <select
                                    onChange={handleLayoutChange}
                                    className="w-full p-3 border border-black rounded-lg focus:ring-2 focus:ring-black focus:border-black shadow-sm"
                                >
                                    <option value="default">Default Layout</option>
                                    <option value="minimal">Minimal Layout</option>
                                    <option value="cartFocused">Cart-Focused Layout</option>
                                </select>
                            </div>
                            <div className="mb-4">
                                <h3 className="text-lg font-semibold mb-2 text-black">Available Components</h3>
                                <div className="flex flex-wrap gap-2">
                                    {Object.entries(componentNames).map(([key, name]) => (
                                        <DraggableItem key={key} name={name} componentKey={key} />
                                    ))}
                                </div>
                            </div>
                            <div className="space-y-4">
                                {tempLayoutConfig.map((section, sectionIndex) => (
                                    <div key={sectionIndex} className="relative border border-black rounded-lg p-4">
                                        <div className="flex justify-between items-center mb-2">
                                            <div className="text-sm text-black">Section {sectionIndex + 1}</div>
                                            <div className="flex space-x-2">
                                                <select
                                                    value={section.cells}
                                                    onChange={(e) => handleCellCountChange(sectionIndex, e.target.value)}
                                                    className="p-1 border border-black rounded-lg text-sm"
                                                >
                                                    <option value="1">1 Cell</option>
                                                    <option value="2">2 Cells</option>
                                                    <option value="3">3 Cells</option>
                                                    <option value="4">4 Cells</option>
                                                </select>
                                                <button
                                                    onClick={() => handleAddSection(sectionIndex + 1)}
                                                    className="px-2 py-1 bg-black text-white rounded-lg hover:bg-white hover:text-black hover:border hover:border-black transition-colors text-sm shadow-sm"
                                                >
                                                    Add Section Below
                                                </button>
                                                <button
                                                    onClick={() => handleRemoveSection(sectionIndex)}
                                                    className="px-2 py-1 bg-black text-white rounded-lg hover:bg-white hover:text-black hover:border hover:border-black transition-colors text-sm shadow-sm"
                                                    disabled={tempLayoutConfig.length === 1}
                                                >
                                                    Remove Section
                                                </button>
                                            </div>
                                        </div>
                                        <div className={`grid grid-cols-${section.cells} gap-4`}>
                                            {section.components.map((component, cellIndex) => (
                                                <DropZone
                                                    key={cellIndex}
                                                    sectionIndex={sectionIndex}
                                                    cellIndex={cellIndex}
                                                    value={componentNames[component]}
                                                    onDrop={handleDrop}
                                                    isEmpty={component === 'empty'}
                                                />
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                        <div className="mt-6 flex justify-end space-x-4">
                            <button
                                onClick={handleReset}
                                className="px-4 py-2 bg-white border border-black rounded-lg hover:bg-black hover:text-white transition-colors shadow-sm"
                            >
                                Reset
                            </button>
                            <button
                                onClick={() => setIsPreviewOpen(true)}
                                className="px-4 py-2 bg-white border border-black rounded-lg hover:bg-black hover:text-white transition-colors shadow-sm"
                            >
                                Preview
                            </button>
                            <button
                                onClick={handleCancel}
                                className="px-4 py-2 bg-white border border-black rounded-lg hover:bg-black hover:text-white transition-colors shadow-sm"
                            >
                                Cancel
                            </button>
                            <button
                                onClick={handleSave}
                                className="px-4 py-2 bg-black text-white rounded-lg hover:bg-white hover:text-black hover:border hover:border-black transition-colors shadow-sm"
                            >
                                Save
                            </button>
                        </div>
                        <PreviewModal
                            isOpen={isPreviewOpen}
                            onClose={() => setIsPreviewOpen(false)}
                            layoutConfig={tempLayoutConfig}
                            theme={theme}
                            styles={styles}
                        />
                    </div>
                </div>
            );
        };

        const ThemeModal = ({ isOpen, onClose, setTheme }) => {
            if (!isOpen) return null;

            const handleThemeChange = (themeName) => {
                setTheme(themes[themeName]);
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div className="bg-white p-6 rounded-lg w-full max-w-md shadow-xl">
                        <h2 className="text-2xl font-bold mb-4 text-black">Customize Theme</h2>
                        <div className="space-y-4">
                            {Object.keys(themes).map((themeName) => (
                                <button
                                    key={themeName}
                                    onClick={() => handleThemeChange(themeName)}
                                    className="w-full px-4 py-2 bg-gray-200 text-black rounded-lg hover:bg-gray-300 transition-colors"
                                >
                                    {themeName.charAt(0).toUpperCase() + themeName.slice(1).replace(/([A-Z])/g, ' $1')}
                                </button>
                            ))}
                        </div>
                        <div className="mt-6 flex justify-end">
                            <button
                                onClick={onClose}
                                className="px-4 py-2 bg-white border border-black rounded-lg hover:bg-black hover:text-white transition-colors shadow-sm"
                            >
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const StyleModal = ({ isOpen, onClose, setStyles, componentNames }) => {
            const [targetComponent, setTargetComponent] = React.useState('all');
            const [styleOptions, setStyleOptions] = React.useState({
                shadow: false,
                border: false,
                animation: false,
                hoverEffect: false,
            });

            if (!isOpen) return null;

            const handleStyleChange = (option) => {
                setStyleOptions((prev) => ({ ...prev, [option]: !prev[option] }));
            };

            const handleSave = () => {
                const newStyles = {
                    shadow: styleOptions.shadow ? 'shadow-lg' : '',
                    border: styleOptions.border ? 'border-2 border-gray-500' : '',
                    animation: styleOptions.animation ? 'animate-fadeIn' : '',
                    hover: styleOptions.hoverEffect ? 'transform hover:scale-105 transition-transform duration-300' : '',
                };

                setStyles(targetComponent, newStyles);
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div className="bg-white p-6 rounded-lg w-full max-w-md shadow-xl">
                        <h2 className="text-2xl font-bold mb-4 text-black">Customize Style</h2>
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-black mb-1">Apply to Component</label>
                                <select
                                    value={targetComponent}
                                    onChange={(e) => setTargetComponent(e.target.value)}
                                    className="w-full p-3 border border-black rounded-lg focus:ring-2 focus:ring-black focus:border-black shadow-sm"
                                >
                                    <option value="all">All Components</option>
                                    {Object.keys(componentNames).map((key) => (
                                        key !== 'empty' && (
                                            <option key={key} value={key}>
                                                {componentNames[key]}
                                            </option>
                                        )
                                    ))}
                                </select>
                            </div>
                            <div className="space-y-2">
                                <label className="flex items-center space-x-2">
                                    <input
                                        type="checkbox"
                                        checked={styleOptions.shadow}
                                        onChange={() => handleStyleChange('shadow')}
                                        className="h-4 w-4 text-black focus:ring-black border-gray-300 rounded"
                                    />
                                    <span className="text-black">Add Shadow</span>
                                </label>
                                <label className="flex items-center space-x-2">
                                    <input
                                        type="checkbox"
                                        checked={styleOptions.border}
                                        onChange={() => handleStyleChange('border')}
                                        className="h-4 w-4 text-black focus:ring-black border-gray-300 rounded"
                                    />
                                    <span className="text-black">Add Border</span>
                                </label>
                                <label className="flex items-center space-x-2">
                                    <input
                                        type="checkbox"
                                        checked={styleOptions.animation}
                                        onChange={() => handleStyleChange('animation')}
                                        className="h-4 w-4 text-black focus:ring-black border-gray-300 rounded"
                                    />
                                    <span className="text-black">Add Fade-In Animation</span>
                                </label>
                                <label className="flex items-center space-x-2">
                                    <input
                                        type="checkbox"
                                        checked={styleOptions.hoverEffect}
                                        onChange={() => handleStyleChange('hoverEffect')}
                                        className="h-4 w-4 text-black focus:ring-black border-gray-300 rounded"
                                    />
                                    <span className="text-black">Add Hover Scale Effect</span>
                                </label>
                            </div>
                        </div>
                        <div className="mt-6 flex justify-end space-x-4">
                            <button
                                onClick={onClose}
                                className="px-4 py-2 bg-white border border-black rounded-lg hover:bg-black hover:text-white transition-colors shadow-sm"
                            >
                                Cancel
                            </button>
                            <button
                                onClick={handleSave}
                                className="px-4 py-2 bg-black text-white rounded-lg hover:bg-white hover:text-black hover:border hover:border-black transition-colors shadow-sm"
                            >
                                Save
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isModalOpen, setIsModalOpen] = React.useState(false);
            const [isThemeModalOpen, setIsThemeModalOpen] = React.useState(false);
            const [isStyleModalOpen, setIsStyleModalOpen] = React.useState(false);
            const [layoutConfig, setLayoutConfig] = React.useState(JSON.parse(JSON.stringify(defaultLayout)));
            const [theme, setTheme] = React.useState(themes.default);
            const [componentStyles, setComponentStyles] = React.useState({});

            const componentNames = {
                empty: 'Empty Section',
                heroBanner: 'Hero Banner',
                cartItems: 'Shopping Cart',
                topCategories: 'Top Categories',
                engineAndElectrical: 'Engine & Electrical Parts',
                productsToAdd: 'Explore More Products',
                orderSummary: 'Order Summary',
                recommendedProductsToBuy: 'Must-Have Recommendations',
                offersSection: 'Exclusive Offers',
                vehicleFilter: 'Vehicle Filter',
            };

            const getStylesForComponent = (componentKey) => {
                return componentStyles[componentKey] || componentStyles['all'] || { shadow: '', border: '', animation: '', hover: '' };
            };

            const handleSetStyles = (target, newStyles) => {
                setComponentStyles((prev) => ({
                    ...prev,
                    [target]: newStyles,
                }));
            };

            const components = {
                heroBanner: <HeroBanner theme={theme} styles={getStylesForComponent('heroBanner')} />,
                vehicleFilter: <VehicleFilter theme={theme} styles={getStylesForComponent('vehicleFilter')} />,
                cartItems: <CartItems theme={theme} styles={getStylesForComponent('cartItems')} />,
                topCategories: <TopCategories theme={theme} styles={getStylesForComponent('topCategories')} />,
                engineAndElectrical: <EngineAndElectrical theme={theme} styles={getStylesForComponent('engineAndElectrical')} />,
                productsToAdd: <ProductsToAdd theme={theme} styles={getStylesForComponent('productsToAdd')} />,
                orderSummary: <OrderSummary theme={theme} styles={getStylesForComponent('orderSummary')} />,
                recommendedProductsToBuy: <RecommendedProductsToBuy theme={theme} styles={getStylesForComponent('recommendedProductsToBuy')} />,
                offersSection: <OffersSection theme={theme} styles={getStylesForComponent('offersSection')} />,
                empty: null,
            };

            const handleSave = () => {
                setIsModalOpen(false);
            };

            const handleAddSection = (index) => {
                const newConfig = [...layoutConfig];
                newConfig.splice(index, 0, { cells: 1, components: ['empty'] });
                setLayoutConfig(newConfig);
            };

            const handleRemoveSection = (index) => {
                if (layoutConfig.length <= 1) return;
                const newConfig = [...layoutConfig];
                newConfig.splice(index, 1);
                setLayoutConfig(newConfig);
            };

            return (
                <ErrorBoundary>
                    <style>
                        {`
              @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
              }
              .animate-fadeIn {
                animation: fadeIn 1s ease-in;
              }
            `}
                    </style>
                    <div className={`flex flex-col min-h-screen ${theme.bg}`}>
                        <Header
                            theme={theme}
                            onCustomizeLayout={() => setIsModalOpen(true)}
                            onCustomizeTheme={() => setIsThemeModalOpen(true)}
                            onCustomizeStyle={() => setIsStyleModalOpen(true)}
                        />
                        <main className="container mx-auto p-6 flex-grow">
                            <div className="space-y-6">
                                {layoutConfig.map((section, sectionIndex) => (
                                    <div
                                        key={sectionIndex}
                                        className={`grid gap-4 ${section.cells === 1
                                                ? 'grid-cols-1'
                                                : section.cells === 2
                                                    ? 'grid-cols-1 md:grid-cols-2'
                                                    : section.cells === 3
                                                        ? 'grid-cols-1 md:grid-cols-3'
                                                        : 'grid-cols-1 md:grid-cols-4'
                                            }`}
                                    >
                                        {section.components.map((component, cellIndex) => (
                                            <div key={cellIndex} className="min-h-[200px]">
                                                {components[component]}
                                            </div>
                                        ))}
                                    </div>
                                ))}
                            </div>
                            <LayoutModal
                                isOpen={isModalOpen}
                                onClose={() => setIsModalOpen(false)}
                                onSave={handleSave}
                                layoutConfig={layoutConfig}
                                setLayoutConfig={setLayoutConfig}
                                addSection={handleAddSection}
                                removeSection={handleRemoveSection}
                                theme={theme}
                                styles={getStylesForComponent('all')}
                            />
                            <ThemeModal
                                isOpen={isThemeModalOpen}
                                onClose={() => setIsThemeModalOpen(false)}
                                setTheme={setTheme}
                            />
                            <StyleModal
                                isOpen={isStyleModalOpen}
                                onClose={() => setIsStyleModalOpen(false)}
                                setStyles={handleSetStyles}
                                componentNames={componentNames}
                            />
                        </main>
                        <Footer theme={theme} />
                    </div>
                </ErrorBoundary>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>