<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings - Monochrome Digital Store</title>
    <meta name="description" content="Manage your account settings for Monochrome Digital Store.">
    <link rel="shortcut icon" type="image/x-icon" href="https://placehold.co/16x16/000000/ffffff?text=Fav">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Google-Style Header CSS */
        :root {
            --header-height: 60px;
            --header-bg: #fff;
            --header-border: 1px solid #e5e7eb;
            --header-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --header-text: #6b7280;
            --header-text-hover: #111827;
            --search-bg: #f3f4f6;
            --search-bg-focus: #fff;
            --search-border: 1px solid transparent;
            --search-border-focus: 1px solid #e5e7eb;
            --search-shadow-focus: 0 1px 6px rgba(0, 0, 0, 0.1);
            --search-text: #111827;
            --search-placeholder: #6b7280;
            --icon-color: #6b7280;
            --icon-hover-color: #111827;
            --icon-badge-bg: #000000;
            --icon-badge-color: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            padding-top: var(--header-height);
            background-color: #f9fafb;
            color: #111827;
        }

        .google-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background: var(--header-bg);
            border-bottom: var(--header-border);
            box-shadow: var(--header-shadow);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
        }

        .google-header-logo {
            display: flex;
            align-items: center;
            height: 100%;
            margin-right: 20px;
        }

        .google-header-logo span {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
        }

        .google-header-search {
            flex: 1;
            max-width: 720px;
            margin: 0 auto;
            position: relative;
        }

        .google-search-form {
            display: flex;
            width: 100%;
        }

        .google-search-input-container {
            position: relative;
            flex: 1;
            display: flex;
            align-items: center;
            background: var(--search-bg);
            border-radius: 24px;
            height: 46px;
            transition: background 0.2s, box-shadow 0.2s, border 0.2s;
            border: var(--search-border);
        }

        .google-search-input-container:hover {
            background: var(--search-bg-focus);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
        }

        .google-search-input-container:focus-within {
            background: var(--search-bg-focus);
            border: var(--search-border-focus);
            box-shadow: var(--search-shadow-focus);
        }

        .google-search-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 46px;
            color: var(--icon-color);
        }

        .google-search-input {
            flex: 1;
            height: 100%;
            background: transparent;
            border: none;
            outline: none;
            font-size: 16px;
            color: var(--search-text);
            padding: 0;
        }

        .google-search-input::placeholder {
            color: var(--search-placeholder);
        }

        .google-search-voice {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 46px;
            color: var(--icon-color);
            cursor: pointer;
        }

        .google-header-icons {
            display: flex;
            align-items: center;
        }

        .google-header-icon {
            position: relative;
            margin-left: 16px;
            display: flex;
            align-items: center;
            color: var(--icon-color);
            cursor: pointer;
            transition: color 0.2s;
            padding: 8px 12px;
            border-radius: 20px;
        }

        .google-header-icon:hover {
            background-color: rgba(60, 64, 67, 0.08);
            color: var(--icon-hover-color);
        }

        .google-header-icon i {
            margin-right: 6px;
        }

        .google-header-icon-text {
            font-size: 14px;
            font-weight: 500;
        }

        .google-icon-badge {
            position: absolute;
            top: 0;
            left: 16px;
            background: var(--icon-badge-bg);
            color: var(--icon-badge-color);
            font-size: 11px;
            font-weight: 700;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 5px;
        }

        /* Tab Styling */
        .tabs {
            display: flex;
            border-bottom: 1px solid #e5e7eb;
            overflow-x: auto; /* Enable horizontal scrolling for small screens */
            white-space: nowrap; /* Prevent wrapping */
        }

        .tab {
            padding: 12px 24px;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: color 0.2s, border-bottom 0.2s;
            border-bottom: 2px solid transparent;
        }

        .tab:hover {
            color: #111827;
        }

        .tab.active {
            color: #111827;
            border-bottom: 2px solid #000000;
            font-weight: 600;
        }

        /* Sub-section Navigation Styling */
        .sub-section-nav {
            margin-bottom: 1.5rem; /* mb-6 equivalent */
            border-bottom: 1px solid #e5e7eb;
        }

        .sub-section-nav a {
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            cursor: pointer;
            transition: color 0.2s, border-bottom 0.2s;
            border-bottom: 2px solid transparent;
            text-decoration: none; /* Remove default underline */
        }

        .sub-section-nav a:hover {
            color: #111827;
        }

        .sub-section-nav a.active {
            color: #111827;
            border-bottom: 2px solid #000000;
            font-weight: 600;
        }


        /* Content and Sub-section Display */
        .content-section, .sub-section {
            display: none;
        }

        .content-section.active, .sub-section.active {
            display: block;
        }

        /* Toggle Switch Styling */
        .toggle-checkbox:checked + .toggle-label {
            background-color: #000000;
        }

        .toggle-checkbox:checked + .toggle-label::after {
            transform: translateX(16px);
        }

        .toggle-label {
            width: 36px;
            height: 20px;
            background-color: #d1d5db;
            border-radius: 9999px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s;
            display: inline-block; /* Ensure label is inline-block for flex alignment */
        }

        .toggle-label::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.2s;
        }

        /* Edit Mode Styling */
        .edit-mode input:not([type="checkbox"]), .edit-mode select, .edit-mode input[type="radio"] + label {
            background-color: #ffffff;
            border-color: #000000 !important; /* Use !important to override Tailwind defaults if necessary */
            pointer-events: auto; /* Enable interaction */
        }

        .view-mode input:not([type="checkbox"]), .view-mode select, .view-mode input[type="radio"] + label {
            background-color: #f3f4f6;
            border-color: #e5e7eb !important; /* Use !important to override Tailwind defaults if necessary */
            pointer-events: none; /* Disable interaction */
        }

        /* Hide elements in view mode */
        .view-mode .view-mode-hidden {
            display: none;
        }


        /* Style for radio button labels in view mode */
        .view-mode .gender-option label {
             background-color: transparent !important; /* Ensure labels are transparent in view mode */
             border: none !important; /* Remove border in view mode */
             padding: 0 !important; /* Remove padding in view mode */
             cursor: default !important; /* Change cursor in view mode */
        }

        /* Style for disabled checkboxes in view mode */
        .view-mode input[type="checkbox"] {
            pointer-events: none; /* Disable clicking */
            opacity: 0.7; /* Visually indicate disabled state */
        }
         .view-mode input[type="checkbox"] + label {
            pointer-events: none; /* Disable clicking on the label */
            opacity: 0.7; /* Visually indicate disabled state */
         }

        /* Hide radio button inputs in view mode */
        .view-mode .gender-option input[type="radio"] {
            display: none;
        }

         /* Style for disabled text inputs in view mode */
        .view-mode input[type="text"],
        .view-mode input[type="email"],
        .view-mode input[type="tel"],
        .view-mode input[type="password"] {
            pointer-events: none; /* Disable interaction */
            color: #4b5563; /* Match text color to view mode */
        }

        /* Style for disabled buttons in view mode */
        .view-mode button:not(.edit-btn) {
             pointer-events: none; /* Disable clicking */
             opacity: 0.7; /* Visually indicate disabled state */
        }


        /* Scrollable Sections */
        .scrollable-addresses, .scrollable-payments, .scrollable-upi {
            max-height: 200px;
            overflow-y: auto;
            scrollbar-width: thin; /* Firefox */
            scrollbar-color: #d1d5db #f3f4f6; /* Firefox */
        }

        /* Scrollbar for Webkit browsers */
        .scrollable-addresses::-webkit-scrollbar, .scrollable-payments::-webkit-scrollbar, .scrollable-upi::-webkit-scrollbar {
            width: 6px;
        }

        .scrollable-addresses::-webkit-scrollbar-thumb, .scrollable-payments::-webkit-scrollbar-thumb, .scrollable-upi::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 9999px;
        }

        .scrollable-addresses::-webkit-scrollbar-track, .scrollable-payments::-webkit-scrollbar-track, .scrollable-upi::-webkit-scrollbar-track {
            background-color: #f3f4f6;
        }

        /* FAQ Styling */
        .faq-item {
            border-bottom: 1px solid #e5e7eb;
            padding: 12px 0;
        }

        .faq-question {
            cursor: pointer;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #111827; /* Ensure question text is dark */
        }

        .faq-question i {
             transition: transform 0.2s ease-in-out; /* Smooth rotation for arrow */
        }

        .faq-question i.fa-chevron-up {
             transform: rotate(180deg); /* Rotate arrow up when active */
        }


        .faq-answer {
            display: none;
            margin-top: 8px;
            color: #6b7280;
            font-size: 14px; /* Adjust font size for readability */
            line-height: 1.5; /* Improve line spacing */
        }

        .faq-answer.active {
            display: block;
        }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .google-header-search {
                max-width: 100%;
                margin: 0 10px;
            }

            .google-search-input-container {
                height: 40px;
            }

            .google-header-icon {
                margin-left: 8px;
            }

            .google-header-icon-text {
                display: none;
            }

            .google-header-icon {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                justify-content: center;
                padding: 0;
            }

            .google-header-icon i {
                margin-right: 0;
            }

            .google-icon-badge {
                top: 0;
                right: 0;
                left: auto;
            }
        }

        @media (max-width: 576px) {
            .google-header {
                padding: 0 10px;
            }

            .google-header-logo span {
                font-size: 16px;
            }

            .google-search-input-container {
                height: 36px;
            }

            .google-search-icon,
            .google-search-voice {
                width: 36px;
            }
        }

        @media (max-width: 640px) {
            .tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
            }

            .tab {
                padding: 8px 16px;
                font-size: 13px;
            }
             .sub-section-nav a {
                padding: 6px 12px;
                font-size: 13px;
             }
        }
    </style>
</head>
<body>
    <header class="google-header">
        <div class="google-header-logo">
            <span>HCL Software</span>
        </div>

        <div class="google-header-search">
            <form class="google-search-form">
                <div class="google-search-input-container">
                    <div class="google-search-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <input type="text" class="google-search-input" placeholder="Search settings...">
                    <div class="google-search-voice">
                        <i class="fas fa-microphone"></i>
                    </div>
                </div>
            </form>
        </div>

        <div class="google-header-icons">
            <div class="google-header-icon" title="Wishlist">
                <i class="fas fa-heart"></i>
                <span class="google-icon-badge">0</span>
                <span class="google-header-icon-text">Wishlist</span>
            </div>
            <div class="google-header-icon" title="My Account">
                <i class="fas fa-user"></i>
                <span class="google-header-icon-text">Account</span>
            </div>
            <div class="google-header-icon" title="Cart">
                <i class="fas fa-shopping-cart"></i>
                <span class="google-header-icon-text">Cart</span>
            </div>
            <div class="google-header-icon" title="Logout">
                <i class="fas fa-sign-out-alt"></i>
                <span class="google-header-icon-text">Logout</span>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <div class="tabs">
            <div class="tab active" onclick="showTab('my-account')">My Account</div>
            <div class="tab" onclick="showTab('my-addresses')">My Addresses</div>
            <div class="tab" onclick="showTab('saved-payments')">Saved Payment Options</div>
            <div class="tab" onclick="showTab('my-reviews')">My Reviews</div>
            <div class="tab" onclick="showTab('finances')">Finances</div>
            <div class="tab" onclick="showTab('more')">More</div>
            <div class="tab" onclick="showTab('my-queries')">My Queries</div>
        </div>

        <div id="my-account" class="content-section active mt-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div id="my-account-profile" class="bg-white p-5 rounded-lg shadow-sm view-mode">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-black">Personal Information</h2>
                        <button onclick="toggleEditMode('my-account-profile')" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md edit-btn">Edit</button>
                    </div>
                    <form id="profile-form" onsubmit="saveProfile(event)">
                        <div class="flex flex-col items-center mb-4">
                            <img id="profile-photo" class="w-24 h-24 rounded-full object-cover mb-2 border border-gray-300" src="https://placehold.co/96x96/e5e7eb/111827?text=Profile" alt="Profile Photo">
                            <input type="file" id="profile-photo-upload" class="hidden" accept="image/*" onchange="previewPhoto(event)">
                            <label for="profile-photo-upload" class="text-sm font-medium text-black hover:text-gray-700 cursor-pointer view-mode-hidden">Change Photo</label>
                        </div>
                        <div class="grid grid-cols-1 gap-3">
                            <div>
                                <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                                <input type="text" name="firstName" id="firstName" value="Arjun" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                            </div>
                            <div>
                                <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                                <input type="text" name="lastName" id="lastName" value="Kumar" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
                                <input type="email" name="email" id="email" value="arjun.kumar@gmail.com" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                <input type="tel" name="phone" id="phone" value="+919876543210" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                            </div>
                             <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Gender</label>
                                <div class="mt-1 flex flex-wrap gap-4">
                                    <div class="flex items-center gender-option">
                                        <input type="radio" name="gender" id="gender_male" value="Male" class="focus:ring-black h-4 w-4 text-black border-gray-300" checked> <label for="gender_male" class="ml-2 block text-sm font-medium text-gray-700">Male</label>
                                    </div>
                                    <div class="flex items-center gender-option">
                                        <input type="radio" name="gender" id="gender_female" value="Female" class="focus:ring-black h-4 w-4 text-black border-gray-300">
                                        <label for="gender_female" class="ml-2 block text-sm font-medium text-gray-700">Female</label>
                                    </div>
                                    <div class="flex items-center gender-option">
                                        <input type="radio" name="gender" id="gender_other" value="Other" class="focus:ring-black h-4 w-4 text-black border-gray-300">
                                        <label for="gender_other" class="ml-2 block text-sm font-medium text-gray-700">Other</label>
                                    </div>
                                     <div class="flex items-center gender-option">
                                        <input type="radio" name="gender" id="gender_not_say" value="Prefer not to say" class="focus:ring-black h-4 w-4 text-black border-gray-300">
                                        <label for="gender_not_say" class="ml-2 block text-sm font-medium text-gray-700">Prefer not to say</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 text-right hidden save-cancel">
                            <button type="button" onclick="toggleEditMode('my-account-profile')" class="text-sm font-medium text-gray-600 hover:text-gray-800 px-3 py-1 rounded-md mr-2">Cancel</button>
                            <button type="submit" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Save</button>
                        </div>
                    </form>
                </div>

                <div id="login-security" class="bg-white p-5 rounded-lg shadow-sm">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-black">Login and Security</h2>
                    </div>
                    <div class="grid grid-cols-1 gap-3">
                        <div class="flex items-center justify-between py-2 border-b border-gray-200">
                            <div>
                                <p class="text-sm font-medium text-gray-900">Password</p>
                                <p class="text-xs text-gray-500">Last updated: 30 days ago</p>
                            </div>
                            <button onclick="openPasswordModal()" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Change</button>
                        </div>

                        <div class="py-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Two-Step Verification</label>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Add an extra layer of security to your account</p>
                                </div>
                                <div class="relative inline-block">
                                    <input type="checkbox" name="two_step_verification" id="two_step_verification" class="toggle-checkbox hidden" onchange="saveSecurityToggle(this)">
                                    <label for="two_step_verification" class="toggle-label"></label>
                                </div>
                            </div>
                        </div>

                        <div class="py-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Multi-Factor Authentication</label>
                            <select id="mfa_method" name="mfa_method" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md" onchange="saveMfaMethod(this)">
                                <option value="none">None</option>
                                <option value="app">Authenticator App</option>
                                <option value="sms">SMS Code</option>
                                <option value="email">Email Code</option>
                                <option value="security_key">Security Key</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Choose your preferred authentication method</p>
                        </div>
                    </div>
                </div>

                <!-- Password Change Modal -->
                <div id="password-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-black">Change Password</h3>
                            <button onclick="closePasswordModal()" class="text-gray-500 hover:text-gray-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <form id="password-form" onsubmit="changePassword(event)">
                            <div class="space-y-4">
                                <div>
                                    <label for="currentPassword" class="block text-sm font-medium text-gray-700">Current Password</label>
                                    <input type="password" name="currentPassword" id="currentPassword" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                                </div>
                                <div>
                                    <label for="newPassword" class="block text-sm font-medium text-gray-700">New Password</label>
                                    <input type="password" name="newPassword" id="newPassword" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                                </div>
                                <div>
                                    <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
                                    <input type="password" name="confirmPassword" id="confirmPassword" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black sm:text-sm">
                                </div>
                            </div>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button type="button" onclick="closePasswordModal()" class="text-sm font-medium text-gray-600 hover:text-gray-800 px-3 py-1 rounded-md">Cancel</button>
                                <button type="submit" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Update Password</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div id="notification-preferences" class="bg-white p-5 rounded-lg shadow-sm">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-black">Notification Preferences</h2>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between py-2">
                            <div>
                                <p class="text-sm font-medium text-gray-900">Email Notifications</p>
                                <p class="text-xs text-gray-500">Receive updates about orders, promotions, and news via email.</p>
                            </div>
                            <div class="relative inline-block">
                                <input type="checkbox" name="email_notifications" id="email_notifications_pref" class="toggle-checkbox hidden" checked onchange="saveNotificationToggle(this)">
                                <label for="email_notifications_pref" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="border-t border-gray-200"></div>
                        <div class="flex items-center justify-between py-2">
                            <div>
                                <p class="text-sm font-medium text-gray-900">SMS Notifications</p>
                                <p class="text-xs text-gray-500">Get order updates and important alerts via SMS.</p>
                            </div>
                            <div class="relative inline-block">
                                <input type="checkbox" name="sms_notifications" id="sms_notifications_pref" class="toggle-checkbox hidden" onchange="saveNotificationToggle(this)">
                                <label for="sms_notifications_pref" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="border-t border-gray-200"></div>
                        <div class="flex items-center justify-between py-2">
                            <div>
                                <p class="text-sm font-medium text-gray-900">WhatsApp Notifications</p>
                                <p class="text-xs text-gray-500">Receive order confirmations and support via WhatsApp.</p>
                            </div>
                            <div class="relative inline-block">
                                <input type="checkbox" name="whatsapp_notifications" id="whatsapp_notifications_pref" class="toggle-checkbox hidden" checked onchange="saveNotificationToggle(this)">
                                <label for="whatsapp_notifications_pref" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="border-t border-gray-200"></div>
                        <div class="flex items-center justify-between py-2">
                            <div>
                                <p class="text-sm font-medium text-gray-900">Push Notifications</p>
                                <p class="text-xs text-gray-500">Get instant notifications on your device.</p>
                            </div>
                            <div class="relative inline-block">
                                <input type="checkbox" name="push_notifications" id="push_notifications_pref" class="toggle-checkbox hidden" onchange="saveNotificationToggle(this)">
                                <label for="push_notifications_pref" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I update my personal information?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Click "Edit" on the Personal Information card, update your details, and click "Save".
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I change my notification preferences?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Click "Edit" in the Notification Preferences section, toggle your preferences, and click "Save".
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>What kind of notifications can I receive?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        You can receive notifications via email, SMS, and WhatsApp about your orders, promotions, and important updates.
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I change my profile picture?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        In the Personal Information section, click "Edit", then click "Change Photo" below your current profile picture and select a new image file. Click "Save" to apply the changes.
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I update my gender information?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Yes, click "Edit" on the Personal Information card, select your gender using the radio buttons, and click "Save".
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I change my password?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        In the Login and Security section, click the "Change" button next to Password. Enter your current password, new password, and confirm the new password in the popup. Click "Update Password" to save your changes.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>What is Two-Step Verification?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Two-Step Verification adds an extra layer of security by requiring a second form of verification (like a code sent to your phone) when you log in, even if someone has your password.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>What Multi-Factor Authentication options are available?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        You can choose from several options: Authenticator App (like Google Authenticator), SMS Code, Email Code, or a physical Security Key for the highest level of protection.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>What should I do if I forget my password?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        On the login page, click "Forgot Password" and follow the instructions to reset your password via email or phone.
                    </div>
                </div>
            </div>
        </div>

        <div id="my-addresses" class="content-section mt-6">
             <div class="bg-white p-5 rounded-lg shadow-sm">
                <div class="flex justify-between items-center mb-3">
                    <h2 class="text-lg font-semibold text-black">My Addresses</h2>
                    <button onclick="addNewAddress()" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Add New</button>
                </div>
                <div id="address-list" class="scrollable-addresses">
                    </div>
            </div>
            <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I add multiple addresses?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Yes, click "Add New" in the My Addresses section to add more addresses. You can also edit or delete existing ones.
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I set a default shipping address?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        You can set a default address during checkout or by editing an address in the My Addresses section (functionality to be implemented).
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>What information is required for an address?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        You need to provide a label (like Home or Work), recipient name, full address, and a contact phone number.
                    </div>
                </div>
            </div>
        </div>

         <div id="saved-payments" class="content-section mt-6">
             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-5 rounded-lg shadow-sm view-mode">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-black">Saved UPI</h2>
                        <button onclick="addNewUPI()" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Add New</button>
                    </div>
                    <div id="upi-list" class="scrollable-upi space-y-2">
                         </div>
                </div>
                <div class="bg-white p-5 rounded-lg shadow-sm view-mode">
                    <div class="flex justify-between items-center mb-3">
                        <h2 class="text-lg font-semibold text-black">Saved Cards</h2>
                        <button onclick="addNewCard()" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Add New</button>
                    </div>
                    <div id="payment-list" class="scrollable-payments space-y-2">
                        </div>
                </div>
            </div>
             <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I remove a saved UPI ID?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        In the Saved UPI section, click "Remove" next to the UPI ID you want to delete and confirm the action.
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I add a new credit or debit card?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Click "Add New" in the Saved Cards section and enter your card details securely.
                    </div>
                </div>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>Is my payment information secure?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Yes, we use industry-standard encryption and security measures to protect your payment information. Your full card details are not stored on our servers.
                    </div>
                </div>
            </div>
        </div>


        <div id="my-reviews" class="content-section mt-6">
            <div class="bg-white p-5 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-black mb-4">My Reviews & Ratings</h2>
                <div class="space-y-4">
                    <div class="border border-gray-200 rounded-md p-4">
                        <div class="flex items-center mb-2">
                            <div class="flex items-center text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i> </div>
                            <span class="ml-2 text-sm text-gray-600">Order #54321 - May 12, 2025</span>
                        </div>
                        <p class="text-sm text-gray-900">The product was great, but the delivery was delayed by a day. Overall, satisfied with the quality!</p>
                    </div>
                    <div class="border border-gray-200 rounded-md p-4">
                        <div class="flex items-center mb-2">
                            <div class="flex items-center text-yellow-400">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i> <i class="far fa-star"></i> </div>
                            <span class="ml-2 text-sm text-gray-600">Order #54322 - May 05, 2025</span>
                        </div>
                        <p class="text-sm text-gray-900">Average experience. The item didn’t match the description fully. Customer support was helpful though.</p>
                    </div>
                    </div>
            </div>
            <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I edit my review after submitting?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Yes, you can edit your review within 7 days of submission by clicking "Edit Review" next to your review.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I submit a review for an order?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        After your order is delivered, you’ll receive a prompt to review the product. Alternatively, visit the order details to submit a review.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Why is my review not visible?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Reviews are moderated for appropriateness. If your review violates our guidelines, it may not be published.
                    </div>
                </div>
            </div>
        </div>

        <div id="finances" class="content-section mt-6">
             <div class="sub-section-nav flex flex-wrap">
                <a href="#finances/wallet" onclick="showSubSection('finances', 'wallet', this)" class="active">Wallet</a>
                <a href="#finances/giftcards" onclick="showSubSection('finances', 'giftcards', this)">Gift Cards</a>
                <a href="#finances/coupons" onclick="showSubSection('finances', 'coupons', this)">My Coupons</a>
            </div>
            <div id="finances-wallet" class="sub-section active bg-white p-5 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-black mb-4">My Wallet</h2>
                <div class="bg-gray-50 p-4 rounded-md border border-gray-200">
                    <p class="text-base font-medium text-gray-700">Current Balance:</p>
                    <p class="text-2xl font-bold text-black mt-2">₹4,250</p>
                    <button onclick="alert('Add Funds functionality not implemented.')" class="mt-4 text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Add Funds</button>
                </div>
                <h3 class="text-base font-semibold text-black mt-6 mb-3">Transaction History</h3>
                <p class="text-gray-600">No recent transactions.</p>
            </div>
            <div id="finances-giftcards" class="sub-section bg-white p-5 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-black mb-4">Gift Cards</h2>
                <form class="mb-6" onsubmit="redeemGiftCard(event)">
                    <label for="giftCardCode" class="block text-sm font-medium text-gray-700">Redeem Gift Card</label>
                    <div class="mt-1 flex rounded-md shadow-sm">
                        <input type="text" name="giftCardCode" id="giftCardCode" class="flex-1 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300 focus:ring-black focus:border-black" placeholder="Enter gift card code" required>
                        <button type="submit" class="inline-flex items-center px-3 py-1 border border-l-0 border-gray-300 rounded-r-md bg-gray-200 text-black hover:bg-gray-300 focus:outline-none focus:ring-1 focus:ring-black focus:border-black">Redeem</button>
                    </div>
                </form>
                 <h3 class="text-base font-semibold text-black mb-3">Your Gift Card Balance</h3>
                 <div class="bg-gray-50 p-4 rounded-md border border-gray-200">
                    <p class="text-base font-medium text-gray-700">Available Balance:</p>
                    <p class="text-2xl font-bold text-black mt-2">₹0</p>
                </div>
            </div>
            <div id="finances-coupons" class="sub-section bg-white p-5 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-black mb-4">My Coupons</h2>
                <div class="space-y-3">
                    <div class="border border-gray-200 rounded-md p-3 flex justify-between items-center">
                        <div>
                            <p class="text-sm font-medium text-gray-900">SUMMER25</p>
                            <p class="text-xs text-gray-600">25% off on orders above ₹2,000</p>
                            <p class="text-xs text-gray-500">Expires: Jun 30, 2025</p>
                        </div>
                        <button onclick="alert('Apply Coupon functionality not implemented.')" class="text-xs font-medium text-white bg-black hover:bg-gray-800 px-2 py-1 rounded-md">Apply</button>
                    </div>
                    <div class="border border-gray-200 rounded-md p-3 flex justify-between items-center">
                        <div>
                            <p class="text-sm font-medium text-gray-900">FREESHIP</p>
                            <p class="text-xs text-gray-600">Free shipping on orders above ₹1,000</p>
                            <p class="text-xs text-gray-500">Expires: May 31, 2025</p>
                        </div>
                         <button onclick="alert('Apply Coupon functionality not implemented.')" class="text-xs font-medium text-white bg-black hover:bg-gray-800 px-2 py-1 rounded-md">Apply</button>
                    </div>
                    </div>
            </div>
             <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I add funds to my wallet?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Click "Add Funds" in the Wallet section, choose your payment method, and follow the instructions to add money.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Where can I find my gift card balance?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Your gift card balance is displayed in the Gift Cards section under Finances.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I apply a coupon?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        During checkout, enter the coupon code in the designated field or apply it directly from the My Coupons section.
                    </div>
                </div>
            </div>
        </div>

        <div id="more" class="content-section mt-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div id="language" class="bg-white p-5 rounded-lg shadow-sm view-mode">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-black">Language Settings</h2>
                        <button onclick="toggleEditMode('language')" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md edit-btn">Edit</button>
                    </div>
                     <form id="language-form" onsubmit="saveLanguage(event)">
                        <div>
                            <label for="languageSelect" class="block text-sm font-medium text-gray-700 mb-1">Language</label>
                            <select id="languageSelect" name="languageSelect" class="nice-select block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md">
                                <option value="English" selected>English (India)</option>
                                <option value="Hindi">Hindi</option>
                                <option value="Tamil">Tamil</option>
                            </select>
                        </div>
                         <div class="mt-6 text-right hidden save-cancel">
                            <button type="button" onclick="toggleEditMode('language')" class="text-sm font-medium text-gray-600 hover:text-gray-800 px-3 py-1 rounded-md mr-2">Cancel</button>
                            <button type="submit" class="text-sm font-medium text-white bg-black hover:bg-gray-800 px-3 py-1 rounded-md">Save</button>
                        </div>
                    </form>
                </div>
                 <div class="bg-white p-5 rounded-lg shadow-sm">
                     <h2 class="text-lg font-semibold text-black mb-4">Other Settings</h2>
                     <p class="text-gray-600">Additional settings can be placed here.</p>
                 </div>
            </div>
             <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                 <div class="faq-item">
                    <div class="faq-question">
                        <span>Which languages are supported?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        We support English (India), Hindi, and Tamil. More languages will be added soon.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Will changing the language affect my account?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        No, changing the language only affects the display. Your account data remains unchanged.
                    </div>
                </div>
            </div>
        </div>

        <div id="my-queries" class="content-section mt-6">
            <div class="bg-white p-5 rounded-lg shadow-sm">
                <h2 class="text-lg font-semibold text-black mb-4">My Queries</h2>
                 <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ticket ID</th>
                                <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Query</th>
                                <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">#98765</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">May 10, 2025</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">Issue with order delivery</td>
                                <td class="px-4 py-3 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Resolved</span></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-medium"><a href="#" class="text-black hover:text-gray-700">View Details</a></td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">#98766</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-500">May 02, 2025</td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-900">Refund not processed</td>
                                <td class="px-4 py-3 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">In Progress</span></td>
                                <td class="px-4 py-3 whitespace-nowrap text-sm font-medium"><a href="#" class="text-black hover:text-gray-700">View Details</a></td>
                            </tr>
                            </tbody>
                    </table>
                </div>
            </div>
             <div class="bg-white p-5 rounded-lg shadow-sm mt-6">
                <h2 class="text-lg font-semibold text-black mb-4">FAQs</h2>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How do I raise a new query?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Go to the Help section, click "Raise a Ticket", and fill in the details of your query.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How long does it take to resolve a query?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Most queries are resolved within 48 hours. Complex issues may take longer.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Can I track the status of my query?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Yes, the status of your query is updated in the My Queries tab. You’ll also receive notifications.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
    <script>
        // Header Functions
        function initHeader() {
            const searchForm = document.querySelector('.google-search-form');
            const searchInput = document.querySelector('.google-search-input');
            const searchVoice = document.querySelector('.google-search-voice');
            const wishlistIcon = document.querySelector('.google-header-icon .fa-heart')?.parentNode;
            const profileIcon = document.querySelector('.google-header-icon .fa-user')?.parentNode;
            const cartIcon = document.querySelector('.google-header-icon .fa-shopping-cart')?.parentNode;
            const logoutIcon = document.querySelector('.google-header-icon .fa-sign-out-alt')?.parentNode;

            // Update counts from localStorage on load
            updateCounts();

            // Add event listeners to header icons and search
            if (searchForm) searchForm.addEventListener('submit', handleSearch);
            if (searchVoice) searchVoice.addEventListener('click', activateVoiceSearch);
            if (wishlistIcon) wishlistIcon.addEventListener('click', openWishlist);
            if (profileIcon) profileIcon.addEventListener('click', openAccount);
            if (cartIcon) cartIcon.addEventListener('click', openCart);
            if (logoutIcon) logoutIcon.addEventListener('click', handleLogout);

            // Focus search input when clicking the container
            const searchContainer = document.querySelector('.google-search-input-container');
            if (searchContainer) {
                searchContainer.addEventListener('click', function(e) {
                    // Only focus if the click is directly on the container or its children (excluding icons)
                    if (e.target === searchContainer || e.target === searchInput) {
                        searchInput.focus();
                    }
                });
            }
        }

        // Function to update wishlist and cart counts (without localStorage)
        function updateCounts() {
            const wishlistCount = document.querySelector('.google-header-icon .fa-heart + .google-icon-badge');
            const cartCount = document.querySelector('.google-header-icon .fa-shopping-cart + .google-icon-badge');

            if (wishlistCount) {
                // Set default count to 0
                const count = 0;
                wishlistCount.textContent = count;
                // Hide badge if count is 0
                wishlistCount.style.display = count == 0 ? 'none' : 'flex';
            }

            if (cartCount) {
                // Set default count to 0
                const count = 0;
                cartCount.textContent = count;
                // Hide badge if count is 0
                cartCount.style.display = count == 0 ? 'none' : 'flex';
            }
        }

        // Handle search form submission
        function handleSearch(e) {
            e.preventDefault(); // Prevent default form submission
            const searchInput = document.querySelector('.google-search-input');
            const searchTerm = searchInput.value.trim();
            if (searchTerm) {
                // Placeholder for search functionality
                alert(`Searching for: ${searchTerm}`);
                // In a real application, you would redirect or perform an AJAX search
            }
        }

        // Activate voice search (placeholder)
        function activateVoiceSearch() {
            // Check for browser support for Speech Recognition API
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                alert('Voice search activated! (This is a demo - actual voice recognition would be implemented here)');
                // Implement actual voice recognition logic here
            } else {
                alert('Voice search is not supported in your browser.');
            }
        }

        // Open wishlist (placeholder)
        function openWishlist() {
            alert('Opening wishlist');
            // In a real application, you would navigate to the wishlist page
        }

        // Open account (placeholder)
        function openAccount() {
            alert('Opening account');
            // In a real application, you might navigate to the account dashboard or stay on this page
        }

        // Open cart (placeholder)
        function openCart() {
            alert('Opening cart');
            // In a real application, you would navigate to the cart page
        }

        // Handle logout
        function handleLogout() {
            showToast('Logging out...');
            // In a real app, you would clear session data here
            // Redirect to login page after a short delay
            setTimeout(() => {
                window.location.href = 'login-register.html'; // Replace with your actual login page URL
            }, 1000);
        }

        // Content Functions

        // Function to show a specific tab
        function showTab(tabId) {
            console.log('showTab called with:', tabId);
            // Hide all content sections
            const sections = document.querySelectorAll('.content-section');
            const tabs = document.querySelectorAll('.tab');
            if (!sections.length || !tabs.length) {
                console.error('Tabs or sections not found');
                return;
            }
            sections.forEach(section => section.classList.remove('active'));
            // Show the target content section
            const targetSection = document.getElementById(tabId);
            if (targetSection) {
                targetSection.classList.add('active');
            } else {
                console.error(`Section with ID ${tabId} not found`);
            }
            // Deactivate all tabs
            tabs.forEach(tab => tab.classList.remove('active'));
            // Activate the clicked tab
            const targetTab = document.querySelector(`.tab[onclick="showTab('${tabId}')"]`);
            if (targetTab) {
                targetTab.classList.add('active');
            } else {
                console.error(`Tab for ${tabId} not found`);
            }

            // Handle default sub-section for specific tabs (like Finances)
            const defaultSubSection = {
                'finances': 'wallet'
            }[tabId];
            if (defaultSubSection) {
                // Show the default sub-section and update the URL hash
                showSubSection(tabId, defaultSubSection, document.querySelector(`.sub-section-nav a[href="#${tabId}/${defaultSubSection}"]`));
                history.pushState(null, null, `#${tabId}/${defaultSubSection}`);
            } else {
                 // If no default sub-section, just update the main tab hash
                history.pushState(null, null, `#${tabId}`);
            }

            // Re-initialize nice select for the active tab's content
             if (typeof jQuery !== 'undefined' && jQuery.fn.niceSelect) {
                jQuery(`#${tabId} .nice-select`).niceSelect('destroy'); // Destroy existing instances
                jQuery(`#${tabId} .nice-select`).niceSelect(); // Initialize new instances
            }
        }

        // Function to show a specific sub-section within a tab
        function showSubSection(tabId, subSectionId, clickedElement) {
            console.log('showSubSection called with:', tabId, subSectionId);
            const parentSection = document.getElementById(tabId);
            if (!parentSection) {
                console.error(`Parent section ${tabId} not found`);
                return;
            }
            // Hide all sub-sections within the parent tab
            parentSection.querySelectorAll('.sub-section').forEach(section => section.classList.remove('active'));
            // Show the target sub-section
            const targetSubSection = document.getElementById(`${tabId}-${subSectionId}`);
            if (targetSubSection) {
                targetSubSection.classList.add('active');
            } else {
                console.error(`Subsection ${tabId}-${subSectionId} not found`);
            }
            // Deactivate all sub-section navigation links
            parentSection.querySelectorAll('.sub-section-nav a').forEach(link => link.classList.remove('active'));
            // Activate the clicked sub-section navigation link
            if (clickedElement) {
                clickedElement.classList.add('active');
            }
            // Update the URL hash to reflect the current tab and sub-section
            history.pushState(null, null, `#${tabId}/${subSectionId}`);

             // Re-initialize nice select for the active sub-section's content
             if (typeof jQuery !== 'undefined' && jQuery.fn.niceSelect) {
                jQuery(`#${tabId}-${subSectionId} .nice-select`).niceSelect('destroy'); // Destroy existing instances
                jQuery(`#${tabId}-${subSectionId} .nice-select`).niceSelect(); // Initialize new instances
            }
        }


        // Function to toggle between view and edit mode for a section
        function toggleEditMode(sectionId) {
            console.log('toggleEditMode called with:', sectionId);
            const section = document.getElementById(sectionId);
            if (!section) {
                console.error(`Section ${sectionId} not found`);
                return;
            }
            // Check if currently in edit mode
            const isEditMode = section.classList.contains('edit-mode');
            // Toggle the 'edit-mode' and 'view-mode' classes
            section.classList.toggle('edit-mode', !isEditMode);
            section.classList.toggle('view-mode', isEditMode);

            // Find the save/cancel buttons and the edit button within the section
            const saveCancel = section.querySelector('.save-cancel');
            const editBtn = section.querySelector('.edit-btn');
            const viewModeHiddens = section.querySelectorAll('.view-mode-hidden'); // Elements to hide in view mode

            if (saveCancel && editBtn) {
                // Toggle visibility of save/cancel buttons
                saveCancel.classList.toggle('hidden', isEditMode);
                // Change the text of the edit button
                editBtn.textContent = isEditMode ? 'Edit' : 'Cancel';
            }

            // Toggle visibility of elements meant to be hidden in view mode
            viewModeHiddens.forEach(el => el.classList.toggle('hidden', isEditMode));

            // Handle specific logic for notification preferences checkboxes
            if (sectionId === 'notification-preferences') {
                const checkboxes = section.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(checkbox => {
                    // Disable if switching to view mode, enable if switching to edit mode
                    checkbox.disabled = isEditMode;
                     // Also toggle pointer-events and opacity for the label
                     const label = checkbox.nextElementSibling;
                     if (label && label.classList.contains('toggle-label')) {
                        label.style.pointerEvents = isEditMode ? 'none' : 'auto';
                        label.style.opacity = isEditMode ? '0.7' : '1';
                     }
                });
            }

            // Handle specific logic for gender radio buttons in profile section
             if (sectionId === 'my-account-profile') {
                const genderOptions = section.querySelectorAll('.gender-option');
                genderOptions.forEach(option => {
                    const radio = option.querySelector('input[type="radio"]');
                    const label = option.querySelector('label');
                    if (radio && label) {
                        radio.disabled = isEditMode; // Disable radio button in view mode
                         // Hide unchecked radio buttons and show only the selected label in view mode
                         if (isEditMode) { // Switching to view mode
                             if (!radio.checked) {
                                 option.classList.add('hidden');
                             } else {
                                 option.classList.remove('hidden'); // Ensure selected is visible
                             }
                         } else { // Switching to edit mode
                             option.classList.remove('hidden'); // Show all options
                         }
                    }
                });
            }

             // Handle specific logic for login and security inputs
             if (sectionId === 'login-security') {
                 const inputs = section.querySelectorAll('input[type="password"]');
                 inputs.forEach(input => {
                     input.disabled = isEditMode; // Disable inputs in view mode
                      // Clear inputs when switching to edit mode
                      if (!isEditMode) {
                          input.value = '';
                      }
                 });
             }


            // If switching back to view mode, reload the saved data
            if (isEditMode) {
                loadSavedData(sectionId);
            }

             // Re-initialize nice select for the section after toggling mode
             if (typeof jQuery !== 'undefined' && jQuery.fn.niceSelect) {
                // Destroy existing instances within this section
                jQuery(`#${sectionId} .nice-select`).niceSelect('destroy');
                // Initialize new instances if needed (though gender is now radio buttons)
                // jQuery(`#${sectionId} .nice-select`).niceSelect();
            }
        }

        // Function to save profile data (without localStorage)
        function saveProfile(event) {
            console.log('saveProfile called');
            event.preventDefault(); // Prevent default form submission
            const form = event.target;

            // Get selected gender from radio buttons
            const selectedGender = form.querySelector('input[name="gender"]:checked');
            const genderValue = selectedGender ? selectedGender.value : '';

            // Basic validation
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(form.email.value)) {
                showToast('Please enter a valid email address.');
                return;
            }
            if (!/^\+\d{10,15}$/.test(form.phone.value)) {
                 showToast('Please enter a valid phone number (e.g., +919876543210).');
                 return;
            }

            // Store the values in variables to use after toggling edit mode
            const firstName = form.firstName.value;
            const lastName = form.lastName.value;
            const email = form.email.value;
            const phone = form.phone.value;
            const profilePhotoUrl = document.getElementById('profile-photo').src;

            // Switch back to view mode
            toggleEditMode('my-account-profile');

            // Update the form fields with the new values
            form.firstName.value = firstName;
            form.lastName.value = lastName;
            form.email.value = email;
            form.phone.value = phone;

            // Update gender radio buttons
            const genderOptions = form.querySelectorAll('.gender-option');
            genderOptions.forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                if (radio) {
                    radio.checked = (radio.value === genderValue);
                    // Show only the selected gender in view mode
                    if (radio.checked) {
                        option.classList.remove('hidden');
                    } else {
                        option.classList.add('hidden');
                    }
                }
            });

            showToast('Profile saved successfully!');
        }

        // Function to save individual notification toggle (without localStorage)
        function saveNotificationToggle(checkbox) {
            console.log('saveNotificationToggle called for', checkbox.name);

            // Show a brief toast notification
            showToast(`${checkbox.name.replace('_', ' ')} ${checkbox.checked ? 'enabled' : 'disabled'}`);
        }

        // Function to save security toggle (without localStorage)
        function saveSecurityToggle(checkbox) {
            console.log('saveSecurityToggle called for', checkbox.name);

            // Show a brief toast notification
            showToast(`Two-step verification ${checkbox.checked ? 'enabled' : 'disabled'}`);
        }

        // Function to save MFA method (without localStorage)
        function saveMfaMethod(select) {
            console.log('saveMfaMethod called with value', select.value);

            // Show a brief toast notification
            showToast(`Multi-factor authentication method updated`);
        }

        // Function to show a toast notification
        function showToast(message) {
            // Create toast element if it doesn't exist
            let toast = document.getElementById('toast-notification');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast-notification';
                toast.className = 'fixed mt-5 top-5 right-4 bg-black text-white px-4 py-2 rounded-md shadow-lg transform transition-transform duration-300 translate-y-20 opacity-0';
                document.body.appendChild(toast);
            }

            // Set message and show toast
            toast.textContent = message;
            toast.classList.remove('translate-y-20', 'opacity-0');

            // Hide toast after 3 seconds
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // Function to save language settings (without localStorage)
        function saveLanguage(event) {
            console.log('saveLanguage called');
            event.preventDefault(); // Prevent default form submission

            // Get the selected language
            const form = event.target;
            const selectedLanguage = form.languageSelect.value;

            // Switch back to view mode
            toggleEditMode('language');

            // Make sure the selected language is still displayed after toggling edit mode
            form.languageSelect.value = selectedLanguage;

            // Update the nice-select dropdown if it's being used
            if (typeof jQuery !== 'undefined' && jQuery.fn.niceSelect) {
                jQuery(form.languageSelect).niceSelect('update');
            }

            showToast('Language settings saved');
        }

        // Function to open password change modal
        function openPasswordModal() {
            console.log('openPasswordModal called');
            const modal = document.getElementById('password-modal');
            if (modal) {
                // Clear any previous values
                const form = document.getElementById('password-form');
                if (form) {
                    form.reset();
                }

                // Show the modal
                modal.classList.remove('hidden');

                // Focus on the first input
                setTimeout(() => {
                    const firstInput = modal.querySelector('input');
                    if (firstInput) firstInput.focus();
                }, 100);
            }
        }

        // Function to close password change modal
        function closePasswordModal() {
            console.log('closePasswordModal called');
            const modal = document.getElementById('password-modal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        // Function to handle password change (without localStorage)
        function changePassword(event) {
            console.log('changePassword called');
            event.preventDefault(); // Prevent default form submission
            const form = event.target;
            const currentPassword = form.currentPassword.value;
            const newPassword = form.newPassword.value;
            const confirmPassword = form.confirmPassword.value;

            // Basic password validation
            if (newPassword !== confirmPassword) {
                showToast('New password and confirm password do not match.');
                return;
            }
            if (newPassword.length < 8) {
                showToast('New password must be at least 8 characters long.');
                return;
            }

            // In a real application, you would send the currentPassword and newPassword to your backend for validation and update.

            // For demo purposes, show success message and close modal
            showToast('Password updated successfully!');
            closePasswordModal();

            // Update the "last updated" text
            const lastUpdatedText = document.querySelector('#login-security .text-xs.text-gray-500');
            if (lastUpdatedText) {
                lastUpdatedText.textContent = 'Last updated: Just now';
            }
        }


        // Function to load default data and populate forms (no localStorage)
        function loadSavedData(sectionId) {
            console.log('loadSavedData called with:', sectionId);
            const section = document.getElementById(sectionId); // Get the section element

            if (sectionId === 'my-account-profile') {
                // Use default profile data
                const form = document.getElementById('profile-form');
                const profilePhoto = document.getElementById('profile-photo');

                // Default gender is 'Male'
                const currentGender = 'Male';

                if (form) {
                    // Populate form fields with defaults
                    form.firstName.value = 'Arjun';
                    form.lastName.value = 'Kumar';
                    form.email.value = 'arjun.kumar@gmail.com';
                    form.phone.value = '+919876543210';

                    // Set checked state for gender radio buttons and manage visibility
                    const genderOptions = form.querySelectorAll('.gender-option');
                    genderOptions.forEach(option => {
                        const radio = option.querySelector('input[type="radio"]');
                         if (radio) {
                            radio.checked = (radio.value === currentGender);
                            radio.disabled = section.classList.contains('view-mode'); // Disable in view mode

                             // Manage visibility of the radio option div
                             if (section.classList.contains('view-mode')) {
                                 if (!radio.checked) {
                                     option.classList.add('hidden');
                                 } else {
                                     option.classList.remove('hidden'); // Ensure selected is visible
                                 }
                             } else { // In edit mode
                                 option.classList.remove('hidden'); // Show all options
                             }
                         }
                    });
                }
                 if (profilePhoto) {
                     // Set default profile photo
                     profilePhoto.src = 'https://placehold.co/96x96/e5e7eb/111827?text=Profile';
                 }
            } else if (sectionId === 'notification-preferences') {
                // Use default notification preferences
                const defaultPreferences = {
                    email_notifications: true,
                    sms_notifications: false,
                    whatsapp_notifications: true,
                    push_notifications: false
                };

                // Apply defaults to UI
                const emailToggle = document.getElementById('email_notifications_pref');
                const smsToggle = document.getElementById('sms_notifications_pref');
                const whatsappToggle = document.getElementById('whatsapp_notifications_pref');
                const pushToggle = document.getElementById('push_notifications_pref');

                if (emailToggle) emailToggle.checked = defaultPreferences.email_notifications;
                if (smsToggle) smsToggle.checked = defaultPreferences.sms_notifications;
                if (whatsappToggle) whatsappToggle.checked = defaultPreferences.whatsapp_notifications;
                if (pushToggle) pushToggle.checked = defaultPreferences.push_notifications;
            } else if (sectionId === 'login-security') {
                // Use default security settings
                const defaultSecurity = {
                    twoStepVerification: false,
                    mfaMethod: 'none',
                    lastPasswordChange: '30 days ago'
                };

                // Set two-step verification toggle
                const twoStepToggle = document.getElementById('two_step_verification');
                if (twoStepToggle) {
                    twoStepToggle.checked = defaultSecurity.twoStepVerification;
                }

                // Set MFA method dropdown
                const mfaSelect = document.getElementById('mfa_method');
                if (mfaSelect) {
                    mfaSelect.value = defaultSecurity.mfaMethod;
                }

                // Update last password change date
                const lastUpdatedText = document.querySelector('#login-security .text-xs.text-gray-500');
                if (lastUpdatedText) {
                    lastUpdatedText.textContent = `Last updated: ${defaultSecurity.lastPasswordChange}`;
                }
            } else if (sectionId === 'language') {
                // Use default language settings
                const form = document.getElementById('language-form');
                if (form) {
                    // Set default option in the dropdown
                    form.languageSelect.value = 'English';
                     // Update the appearance of the nice-select dropdown
                    if (typeof jQuery !== 'undefined' && jQuery.fn.niceSelect) {
                         jQuery(form.languageSelect).niceSelect('update');
                    }
                }
            } else if (sectionId === 'login-security') {
                 // Password fields are not loaded in view mode for security reasons.
                 // They are only enabled for input in edit mode.
                 const form = document.getElementById('password-form');
                 if (form) {
                     const inputs = form.querySelectorAll('input[type="password"]');
                     inputs.forEach(input => {
                         input.disabled = section.classList.contains('view-mode');
                          // Clear inputs when loading in edit mode
                         if (!section.classList.contains('view-mode')) {
                             input.value = '';
                         }
                     });
                 }
            }
        }

        // Function to preview the selected photo before uploading (client-side only)
        function previewPhoto(event) {
            console.log('previewPhoto called');
            const reader = new FileReader();
            reader.onload = function(){
                const output = document.getElementById('profile-photo');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }


        // Function to add a new address form
        function addNewAddress() {
            console.log('addNewAddress called');
            const addressList = document.getElementById('address-list');
             if (!addressList) {
                console.error('Address list not found');
                return;
            }
            // Generate a unique ID for the new address
            const id = Date.now();
            const newAddress = document.createElement('div');
            newAddress.className = 'border border-gray-200 rounded-md p-2 mb-2 edit-mode'; // Start in edit mode
            newAddress.dataset.id = id; // Store the ID as a data attribute
            newAddress.innerHTML = `
                <form onsubmit="saveAddress(event, ${id})">
                    <h3 class="font-semibold text-gray-900 text-sm mb-1">New Address</h3>
                    <div class="space-y-1">
                        <input type="text" name="label" placeholder="Label (e.g., Home)" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                        <input type="text" name="name" placeholder="Name" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                        <input type="text" name="address" placeholder="Address" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                        <input type="tel" name="phone" placeholder="Phone" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                    </div>
                    <div class="mt-2 text-right">
                        <button type="button" onclick="cancelAddress(${id})" class="text-xs font-medium text-gray-600 hover:text-gray-800 mr-2">Cancel</button>
                        <button type="submit" class="text-xs font-medium text-white bg-black hover:bg-gray-800 px-2 py-1 rounded-md">Save</button>
                    </div>
                </form>
            `;
            // Add the new address form to the top of the list
            addressList.insertBefore(newAddress, addressList.firstChild);
        }

        // Function to switch an address item to edit mode
        function editAddress(id) {
            console.log('editAddress called with:', id);
            const addressDiv = document.querySelector(`#address-list [data-id="${id}"]`);
             if (!addressDiv) {
                console.error(`Address with ID ${id} not found`);
                return;
            }
            // Extract current address data from the displayed text
            const current = {
                label: addressDiv.querySelector('h3').textContent,
                name: addressDiv.querySelector('p:nth-child(2)').textContent,
                address: addressDiv.querySelector('p:nth-child(3)').textContent,
                phone: addressDiv.querySelector('p:nth-child(4)').textContent.replace('Phone: ', '') // Remove "Phone: " prefix
            };
            // Add 'edit-mode' class
            addressDiv.classList.add('edit-mode');
            // Replace the content with an editable form
            addressDiv.innerHTML = `
                <form onsubmit="saveAddress(event, ${id})">
                    <h3 class="font-semibold text-gray-900 text-sm mb-1">Edit Address</h3>
                    <div class="space-y-1">
                        <input type="text" name="label" value="${current.label}" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                        <input type="text" name="name" value="${current.name}" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                        <input type="text" name="address" value="${current.address}" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                        <input type="tel" name="phone" value="${current.phone}" required class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-black focus:border-black text-sm">
                    </div>
                    <div class="mt-2 text-right">
                        <button type="button" onclick="cancelAddress(${id})" class="text-xs font-medium text-gray-600 hover:text-gray-800 mr-2">Cancel</button>
                        <button type="submit" class="text-xs font-medium text-white bg-black hover:bg-gray-800 px-2 py-1 rounded-md">Save</button>
                    </div>
                </form>
            `;
        }

        // Function to save an address (new or edited) without localStorage
        function saveAddress(event, id) {
            console.log('saveAddress called with:', id);
            event.preventDefault(); // Prevent default form submission
            const form = event.target;
            // Get data from form inputs
            const data = {
                id,
                label: form.label.value,
                name: form.name.value,
                address: form.address.value,
                phone: form.phone.value
            };

             // Basic phone number validation
            if (!/^\+\d{10,15}$/.test(data.phone)) {
                 showToast('Please enter a valid phone number (e.g., +919876543210).');
                 return;
            }

            // Find the address element
            const addressDiv = document.querySelector(`#address-list [data-id="${id}"]`);
            if (addressDiv) {
                // Update the address element with the new data
                addressDiv.className = 'border border-gray-200 rounded-md p-2 mb-2';
                addressDiv.innerHTML = `
                    <h3 class="font-semibold text-gray-900 text-sm">${data.label}</h3>
                    <p class="text-xs text-gray-600 mt-0.5">${data.name}</p>
                    <p class="text-xs text-gray-600">${data.address}</p>
                    <p class="text-xs text-gray-600">Phone: ${data.phone}</p>
                    <div class="mt-1">
                        <a href="#" onclick="editAddress(${id}); return false;" class="text-xs font-medium text-black hover:text-gray-700 mr-2">Edit</a>
                        <a href="#" onclick="deleteAddress(${id}); return false;" class="text-xs font-medium text-black hover:text-gray-700 opacity-70">Delete</a>
                    </div>
                `;
                showToast('Address saved successfully!');
            } else {
                // If the address element doesn't exist (shouldn't happen), re-render the list
                renderAddresses();
                showToast('Address saved successfully!');
            }
        }

        // Function to cancel editing or adding an address
        function cancelAddress(id) {
            console.log('cancelAddress called with:', id);
            // Re-render the address list to discard changes or remove the new form
            renderAddresses();
        }

        // Function to delete an address (without localStorage)
        function deleteAddress(id) {
            console.log('deleteAddress called with:', id);
            // Find and remove the address element from the DOM
            const addressElement = document.querySelector(`#address-list [data-id="${id}"]`);
            if (addressElement) {
                addressElement.remove();
                showToast('Address deleted');
            }
        }

        // Function to render the list of addresses (without localStorage)
        function renderAddresses() {
            console.log('renderAddresses called');
            const addressList = document.getElementById('address-list');
            if (!addressList) {
                console.error('Address list not found');
                return;
            }
            // Clear the current list
            addressList.innerHTML = '';

            // Define default addresses that should always be present
            const defaultAddresses = [
                { id: 1, label: 'Home', name: 'Arjun Kumar', address: 'Flat 302, Shanti Apartments, Andheri West, Mumbai, Maharashtra 400053', phone: '+919123456789' },
                { id: 2, label: 'Work', name: 'Arjun Kumar', address: 'Office No. 45, Prestige Towers, MG Road, Bengaluru, Karnataka 560001', phone: '+919987654321' }
            ];

            // Render each address
            defaultAddresses.forEach(addr => {
                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-md p-2 mb-2';
                div.dataset.id = addr.id; // Add data-id for easy selection
                div.innerHTML = `
                    <h3 class="font-semibold text-gray-900 text-sm">${addr.label}</h3>
                    <p class="text-xs text-gray-600 mt-0.5">${addr.name}</p>
                    <p class="text-xs text-gray-600">${addr.address}</p>
                    <p class="text-xs text-gray-600">Phone: ${addr.phone}</p>
                    <div class="mt-1">
                        <a href="#" onclick="editAddress(${addr.id}); return false;" class="text-xs font-medium text-black hover:text-gray-700 mr-2">Edit</a>
                        <a href="#" onclick="deleteAddress(${addr.id}); return false;" class="text-xs font-medium text-black hover:text-gray-700 opacity-70">Delete</a>
                    </div>
                `;
                addressList.appendChild(div);
            });
        }

        // Function to add a new UPI ID (without localStorage)
        function addNewUPI() {
            console.log('addNewUPI called');
            const newUpiId = prompt("Enter new UPI ID:");
            if (newUpiId) {
                const upiList = document.getElementById('upi-list');
                if (upiList) {
                    const newId = Date.now(); // Generate a unique ID
                    const div = document.createElement('div');
                    div.className = 'border border-gray-200 rounded-md p-2 flex items-center justify-between';
                    div.dataset.id = newId; // Add data-id
                    div.innerHTML = `
                        <div>
                            <p class="font-medium text-gray-900 text-sm">${newUpiId}</p>
                        </div>
                        <a href="#" onclick="deleteUPI(${newId}); return false;" class="text-xs font-medium text-black hover:text-gray-700 opacity-70">Remove</a>
                    `;
                    upiList.appendChild(div);
                    showToast('UPI ID added');
                }
            }
        }

        // Function to delete a UPI ID (without localStorage)
        function deleteUPI(id) {
            console.log('deleteUPI called with:', id);
            // Find and remove the UPI element from the DOM
            const upiElement = document.querySelector(`#upi-list [data-id="${id}"]`);
            if (upiElement) {
                upiElement.remove();
                showToast('UPI ID deleted');
            }
        }

        // Function to render the list of UPI IDs (without localStorage)
        function renderUPIs() {
            console.log('renderUPIs called');
            const upiList = document.getElementById('upi-list');
            if (!upiList) {
                console.error('UPI list not found');
                return;
            }
            // Clear the current list
            upiList.innerHTML = '';

            // Define default UPIs that should always be present
            const defaultUPIs = [
                { id: 1, upiId: 'arjun@upi' },
                { id: 2, upiId: 'arjun.kumar@oksbi' }
            ];

            // Render each UPI ID
            defaultUPIs.forEach(upi => {
                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-md p-2 flex items-center justify-between';
                div.dataset.id = upi.id; // Add data-id
                div.innerHTML = `
                    <div>
                        <p class="font-medium text-gray-900 text-sm">${upi.upiId}</p>
                    </div>
                    <a href="#" onclick="deleteUPI(${upi.id}); return false;" class="text-xs font-medium text-black hover:text-gray-700 opacity-70">Remove</a>
                `;
                upiList.appendChild(div);
            });
        }

        // Function to add a new card (without localStorage)
        function addNewCard() {
            console.log('addNewCard called');
            const newCardType = prompt("Enter card type (e.g., Visa):");
            const newCardLast4 = prompt("Enter last 4 digits:");
            const newCardExpiry = prompt("Enter expiry date (MM/YY):");
            if (newCardType && newCardLast4 && newCardExpiry) {
                const paymentList = document.getElementById('payment-list');
                if (paymentList) {
                    const newId = Date.now(); // Generate a unique ID
                    const div = document.createElement('div');
                    div.className = 'border border-gray-200 rounded-md p-2 flex items-center justify-between';
                    div.dataset.id = newId; // Add data-id
                    div.innerHTML = `
                        <div>
                            <p class="font-medium text-gray-900 text-sm">${newCardType} ending in ${newCardLast4}</p>
                            <p class="text-xs text-gray-500">Expires ${newCardExpiry}</p>
                        </div>
                        <a href="#" onclick="deleteCard(${newId}); return false;" class="text-xs font-medium text-black hover:text-gray-700 opacity-70">Remove</a>
                    `;
                    paymentList.appendChild(div);
                    showToast('Card added');
                }
            }
        }

        // Function to delete a card (without localStorage)
        function deleteCard(id) {
            console.log('deleteCard called with:', id);
            // Find and remove the card element from the DOM
            const cardElement = document.querySelector(`#payment-list [data-id="${id}"]`);
            if (cardElement) {
                cardElement.remove();
                showToast('Card deleted');
            }
        }

        // Function to render the list of cards (without localStorage)
        function renderCards() {
            console.log('renderCards called');
            const paymentList = document.getElementById('payment-list');
            if (!paymentList) {
                console.error('Payment list not found');
                return;
            }
            // Clear the current list
            paymentList.innerHTML = '';

            // Define default cards that should always be present
            const defaultCards = [
                { id: 1, type: 'Visa', last4: '1234', expiry: '12/2028' },
                { id: 2, type: 'Mastercard', last4: '5678', expiry: '06/2027' }
            ];

            // Render each card
            defaultCards.forEach(card => {
                const div = document.createElement('div');
                div.className = 'border border-gray-200 rounded-md p-2 flex items-center justify-between';
                div.dataset.id = card.id; // Add data-id
                div.innerHTML = `
                    <div>
                        <p class="font-medium text-gray-900 text-sm">${card.type} ending in ${card.last4}</p>
                        <p class="text-xs text-gray-500">Expires ${card.expiry}</p>
                    </div>
                     <a href="#" onclick="deleteCard(${card.id}); return false;" class="text-xs font-medium text-black hover:text-gray-700 opacity-70">Remove</a>
                `;
                paymentList.appendChild(div);
            });
        }

        // Function to redeem a gift card
        function redeemGiftCard(event) {
            console.log('redeemGiftCard called');
            event.preventDefault(); // Prevent default form submission
            const code = event.target.giftCardCode.value;
            // Placeholder for gift card redemption logic
            showToast(`Gift card ${code} redeemed`);
            event.target.reset(); // Clear the input field
        }


        // FAQ Toggle Functionality
        function initFAQs() {
            const faqQuestions = document.querySelectorAll('.faq-question');
            faqQuestions.forEach(question => {
                question.addEventListener('click', () => {
                    // Get the answer element associated with this question
                    const answer = question.nextElementSibling;
                    // Toggle the 'active' class to show/hide the answer
                    answer.classList.toggle('active');
                    // Find the icon within the question
                    const icon = question.querySelector('i');
                    // Toggle the chevron icon direction
                    icon.classList.toggle('fa-chevron-down');
                    icon.classList.toggle('fa-chevron-up');
                });
            });
        }

        // Initialize Header on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing header');
            initHeader();
        });

        // Initialize Content and handle URL hash on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing content');

            // Initialize Nice Select dropdowns if jQuery and Nice Select are loaded
            if (typeof jQuery !== 'undefined' && jQuery.fn.niceSelect) {
                jQuery('.nice-select').niceSelect();
            } else {
                console.error('jQuery or Nice Select not loaded. Dropdown styling may be affected.');
            }

            // Function to handle initial tab and sub-section based on URL hash
            function handleHash() {
                // Get the hash from the URL, default to 'my-account' if empty
                const hash = window.location.hash.substring(1) || 'my-account';
                // Split the hash into tabId and potential subSectionId
                const [tabId, subSectionId] = hash.split('/');
                const targetTab = document.getElementById(tabId);

                if (targetTab) {
                    // Show the main tab
                    showTab(tabId);
                    // If there's a subSectionId and the tab is 'finances', show the sub-section
                    if (subSectionId && tabId === 'finances') {
                        const targetLink = targetTab.querySelector(`.sub-section-nav a[href="#${tabId}/${subSectionId}"]`);
                        if (targetLink) {
                            showSubSection(tabId, subSectionId, targetLink);
                        } else {
                            // If sub-section not found, default to 'wallet' for finances
                            showSubSection(tabId, 'wallet', targetTab.querySelector(`.sub-section-nav a[href="#${tabId}/wallet"]`));
                        }
                    }
                } else {
                    // If the tab from the hash is not found, default to 'my-account'
                    showTab('my-account');
                }
            }

            // Handle the initial hash on page load
            handleHash();
            // Add event listener for hash changes (when navigating between tabs/sub-sections)
            window.addEventListener('hashchange', handleHash);

            // Load default data for editable sections
            ['my-account-profile', 'notification-preferences', 'language', 'login-security'].forEach(sectionId => {
                loadSavedData(sectionId);
            });

            // Render lists with default data
            renderAddresses();
            renderUPIs();
            renderCards();
            // Initialize FAQ toggles
            initFAQs();
        });
    </script>
</body>
</html>
