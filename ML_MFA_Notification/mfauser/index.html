<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Authentication System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <div class="top-controls">
            <div class="language-selector-container">
                <select id="language-selector" class="language-selector">
                    <option value="en" selected>English</option>
                    <option value="fr">Fran√ßais</option>
                    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                </select>
            </div>
        </div>

        <!-- Floating Theme Toggle Button -->
        <div class="floating-theme-toggle" style="margin-top: 60px;">
            <span class="theme-label">Theme</span>
            <label class="theme-toggle" for="theme-toggle-checkbox">
                <input type="checkbox" id="theme-toggle-checkbox">
                <span class="theme-toggle-slider">
                    <span class="theme-toggle-icon light">‚òÄÔ∏è</span>
                    <span class="theme-toggle-icon dark">üåô</span>
                </span>
            </label>
        </div>

        <main class="app-main">
            <div class="login-page">
                <div class="login-container">
                    <!-- Authentication steps will be rendered here -->
                </div>
                <div id="auth-container" style="width: 100%; height: 100%;"></div>
            </div>
        </main>
    </div>

    <!-- Templates -->
    <!-- Login Form Template -->
    <template id="login-form-template" style="margin-top: 800px;">
        <div class="auth-form">
            <h2>Secure Login</h2>
            <p>Enter your credentials to continue</p>

            <div class="error-message" style="display: none;"></div>

            <form id="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" required autofocus>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="password-input-container">
                        <input type="password" id="password" name="password" placeholder="Enter your password"
                               required>
                        <button type="button" id="toggle-password" class="password-toggle" aria-label="Toggle password visibility">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="eye-icon-svg">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="form-options">
                    <div class="remember-me">
                        <input type="checkbox" id="remember-me" name="remember-me">
                        <label for="remember-me">Remember me</label> &emsp;
                    </div>
                    <a href="#" class="forgot-password">Forgot password?</a>
                </div>

                <button type="submit" class="btn-primary">Log In</button>
            </form>
        </div>
    </template>

    <!-- SMS OTP Verification Template -->

    <template id="sms-otp-template">

        <div class="auth-form">
            <div class="verification-method">
                <h3>SMS Verification</h3>
                <p>A verification code has been sent to your phone number <span id="phone-number"></span>.</p>
            </div>

            <div class="error-message" style="display: none;"></div>

            <form id="sms-otp-form">
                <div class="mpin-label">Enter 6-digit code</div>
                <div class="form-group">
                    <input type="text" id="otp" name="otp" maxlength="6" pattern="[0-9]{6}" required autofocus>
                </div>


                <button type="submit" class="btn-primary">Verify Code</button>
            </form>
        </div>
    </template>

    <!-- Email OTP Verification Template -->
    <template id="email-otp-template">
        <div class="auth-form">
            <div class="verification-method">
                <h3>Email Verification</h3>
                <p>A verification code has been sent to your email address <span id="email-address"></span>. Please check your inbox (and spam folder).</p>
            </div>

            <div class="error-message" style="display: none;"></div>

            <form id="email-otp-form">
                <div class="mpin-label">Enter 6-digit code</div>
                <div class="form-group">
                    <input type="text" id="otp" name="otp" maxlength="6" pattern="[0-9]{6}" required autofocus>
                </div>

                <div class="resend-container">
                    <p id="resend-timer">Resend code in <span id="timer">60</span> seconds</p>
                    <button type="button" id="resend-button" class="btn-link" style="display: none;">Resend code</button>
                </div>

                <button type="submit" class="btn-primary">Verify Code</button>
            </form>
        </div>
    </template>

    <!-- Authenticator App Verification Template -->
    <template id="authenticator-app-template">
        <div class="auth-form">
            <div class="verification-method">
                <h3>Authenticator App</h3>
                <p>Open your authenticator app and enter the current code.</p>
            </div>

            <div class="error-message" style="display: none;"></div>

            <form id="authenticator-form">
                <div class="mpin-label">Enter 6-digit code</div>
                <div class="form-group">
                    <input type="text" id="code" name="code" maxlength="6" pattern="[0-9]{6}" required autofocus>
                </div>

                <button type="submit" class="btn-primary">Verify Code</button>
            </form>
        </div>
    </template>

    <!-- Fingerprint Verification Template -->
    <template id="fingerprint-template">
        <div class="auth-form">
            <div class="verification-method">
                <h3>Fingerprint Verification</h3>
                <p>Please use your fingerprint sensor to verify your identity.</p>
            </div>

            <div class="error-message" style="display: none;"></div>

            <div class="fingerprint-container">
                <div class="fingerprint-scanner" id="fingerprint-scanner">
                    <div class="fingerprint-icon"><img src="fingerprint.jpg" alt="Fingerprint"></div>

                </div>
            </div>

            <button type="button" id="scan-button" class="btn-primary">Scan Fingerprint</button>
        </div>
    </template>

    <!-- MPIN Verification Template -->
    <template id="mpin-template">
        <div class="auth-form">
            <div class="verification-method">
                <h3>MPIN Verification</h3>
                <p>Enter your 4-digit MPIN to verify your identity.</p>
            </div>

            <div class="error-message" style="display: none;"></div>

            <form id="mpin-form">
                <div class="mpin-label">Enter 4-digit MPIN</div>
                <div class="form-group">
                    <input type="password" id="mpin" name="mpin" maxlength="4" pattern="[0-9]{4}" required autofocus placeholder="">
                </div>

                <button type="submit" class="btn-primary">Verify MPIN</button>
            </form>
        </div>
    </template>

    <!-- Progress Indicator Template -->
    <template id="progress-indicator-template">
        <div class="progress-indicator">
            <div class="progress-steps" id="progress-steps">
                <!-- Steps will be added dynamically -->
            </div>
            <div class="progress-labels" id="progress-labels">
                <!-- Labels will be added dynamically -->
            </div>
        </div>
    </template>

    <!-- Authentication Success Template -->
    <template id="auth-success-template">
        <div class="auth-success">
            <div class="success-icon">‚úì</div>
            <h2>Login Successful</h2>
            <p>You have successfully logged in and can now access the system.</p>
            <button id="logout-button">Log Out</button>
        </div>
    </template>

    <!-- JavaScript Files -->
    <script src="theme-manager.js"></script>
    <script src="language-selector.js"></script>
    <script src="mfa-config.js"></script>
    <script src="auth.js"></script>
    <script src="login-form.js"></script>
    <script src="mfa-verification.js"></script>
    <script src="unified-mfa.js"></script>
    <script>
        // Initialize the authentication flow
        document.addEventListener('DOMContentLoaded', () => {
            initAuth();
        });
    </script>
</body>
</html>
