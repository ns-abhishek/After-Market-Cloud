<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Management - Bay Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-warehouse"></i> Bay Management</h2>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-chart-bar"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="bay-management.html" class="nav-link">
                        <i class="fas fa-boxes"></i>
                        <span>Bay Management</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="shipment-tracking.html" class="nav-link">
                        <i class="fas fa-shipping-fast"></i>
                        <span>Shipment Tracking</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="scheduling.html" class="nav-link">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Scheduling</span>
                    </a>
                </li>
                <li class="nav-item active">
                    <a href="customer-management.html" class="nav-link">
                        <i class="fas fa-users"></i>
                        <span>Customer Management</span>
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1>Customer Management</h1>
                    <p>Manage customer information and relationships</p>
                </div>
                <div class="header-right">
                    <button class="btn-primary" onclick="openModal('addCustomerModal')">
                        <i class="fas fa-user-plus"></i>
                        Add Customer
                    </button>
                </div>
            </header>

            <!-- Customer Statistics -->
            <section class="customer-stats-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalCustomersCount">156</h3>
                            <p>Total Customers</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon available">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="activeCustomersCount">142</h3>
                            <p>Active Customers</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon occupied">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="vipCustomersCount">8</h3>
                            <p>VIP Customers</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon pending">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="newCustomersCount">6</h3>
                            <p>New This Month</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customer Filters -->
            <section class="filters-section">
                <div class="filters-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="customerSearchInput" placeholder="Search customers..." onkeyup="filterCustomers()">
                    </div>
                    <div class="filter-group">
                        <select id="customerStatusFilter" onchange="filterCustomers()">
                            <option value="">All Status</option>
                            <option value="Active">Active</option>
                            <option value="VIP">VIP</option>
                            <option value="New">New</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <select id="customerOrdersFilter" onchange="filterCustomers()">
                            <option value="">All Orders</option>
                            <option value="high">High (20+)</option>
                            <option value="medium">Medium (10-19)</option>
                            <option value="low">Low (1-9)</option>
                        </select>
                    </div>
                    <button class="btn-secondary" onclick="customerFilter.resetFilters()">
                        <i class="fas fa-undo"></i>
                        Reset
                    </button>
                </div>
            </section>

            <!-- Customer List -->
            <section class="customer-list-section">
                <div class="section-header">
                    <h2>Customer List</h2>
                    <div class="view-options">
                        <button class="btn-secondary" onclick="exportCustomers()">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                        <button class="btn-secondary" onclick="refreshCustomers()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                </div>

                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr class="header-row">
                                <th class="name-col">
                                    <div class="header-content">
                                        <div class="header-title-row">
                                            <span class="header-title">Customer Name</span>
                                            <i class="fas fa-sort sort-icon" onclick="customerFilter.sortData('name')"></i>
                                        </div>
                                        <input type="text" class="header-search" id="nameSearch" placeholder="Search name..." onkeyup="customerFilter.setColumnFilter('name', this.value)">
                                    </div>
                                </th>
                                <th class="contact-col">
                                    <div class="header-content">
                                        <div class="header-title-row">
                                            <span class="header-title">Contact</span>
                                            <i class="fas fa-sort sort-icon" onclick="customerFilter.sortData('phone')"></i>
                                        </div>
                                        <input type="text" class="header-search" id="contactSearch" placeholder="Search contact..." onkeyup="customerFilter.setColumnFilter('contact', this.value)">
                                    </div>
                                </th>
                                <th class="address-col">
                                    <div class="header-content">
                                        <div class="header-title-row">
                                            <span class="header-title">Address</span>
                                        </div>
                                        <input type="text" class="header-search" id="addressSearch" placeholder="Search address..." onkeyup="customerFilter.setColumnFilter('address', this.value)">
                                    </div>
                                </th>
                                <th class="orders-col">
                                    <div class="header-content">
                                        <div class="header-title-row">
                                            <span class="header-title">Total Orders</span>
                                            <i class="fas fa-sort sort-icon" onclick="customerFilter.sortData('totalOrders')"></i>
                                        </div>
                                        <input type="number" class="header-search" id="ordersSearch" placeholder="Min orders..." onkeyup="customerFilter.setColumnFilter('totalOrders', this.value)">
                                    </div>
                                </th>
                                <th class="status-col">
                                    <div class="header-content">
                                        <div class="header-title-row">
                                            <span class="header-title">Status</span>
                                        </div>
                                        <div class="filter-combo">
                                            <input type="text" class="header-search-input" id="statusSearchInput" placeholder="Search status..." onkeyup="customerFilter.setColumnFilter('status', this.value)">
                                            <select class="header-search-select" id="statusSearch" onchange="customerFilter.setColumnFilter('status', this.value)">
                                                <option value="">All</option>
                                                <option value="Active">Active</option>
                                                <option value="VIP">VIP</option>
                                                <option value="New">New</option>
                                                <option value="Inactive">Inactive</option>
                                            </select>
                                        </div>
                                    </div>
                                </th>
                                <th class="actions-col">
                                    <div class="header-content">
                                        <span class="header-title">Actions</span>
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="customerTableBody">
                            <!-- Customer rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Customer Analytics -->
            <section class="customer-analytics-section">
                <div class="section-header">
                    <h2>Customer Analytics</h2>
                </div>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>Top Customers by Orders</h3>
                        <div id="topCustomersList" class="top-customers-list">
                            <!-- Top customers will be populated by JavaScript -->
                        </div>
                    </div>
                    <div class="analytics-card">
                        <h3>Customer Distribution</h3>
                        <div class="distribution-chart">
                            <div class="chart-item">
                                <span class="chart-label">Active</span>
                                <div class="chart-bar">
                                    <div class="chart-fill active" style="width: 85%"></div>
                                </div>
                                <span class="chart-value">85%</span>
                            </div>
                            <div class="chart-item">
                                <span class="chart-label">VIP</span>
                                <div class="chart-bar">
                                    <div class="chart-fill vip" style="width: 10%"></div>
                                </div>
                                <span class="chart-value">10%</span>
                            </div>
                            <div class="chart-item">
                                <span class="chart-label">New</span>
                                <div class="chart-bar">
                                    <div class="chart-fill new" style="width: 5%"></div>
                                </div>
                                <span class="chart-value">5%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Customer Modal -->
    <div id="addCustomerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Customer</h3>
                <span class="close" onclick="closeModal('addCustomerModal')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="customerForm">
                    <div class="form-group">
                        <label for="customerName">Customer Name</label>
                        <input type="text" id="customerName" name="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Phone Number</label>
                        <input type="tel" id="customerPhone" name="customerPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="customerEmail">Email Address</label>
                        <input type="email" id="customerEmail" name="customerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">Address</label>
                        <textarea id="customerAddress" name="customerAddress" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="customerStatus">Status</label>
                        <select id="customerStatus" name="customerStatus" required>
                            <option value="">Select Status</option>
                            <option value="Active">Active</option>
                            <option value="VIP">VIP</option>
                            <option value="New">New</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('addCustomerModal')">Cancel</button>
                        <button type="submit" class="btn-primary">Add Customer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Customer Details Modal -->
    <div id="customerDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Customer Details</h3>
                <span class="close" onclick="closeModal('customerDetailsModal')">&times;</span>
            </div>
            <div class="modal-body" id="customerDetailsContent">
                <!-- Customer details will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script src="data.js"></script>
    <script src="universal-filter.js"></script>
    <script src="script.js"></script>
    <script src="customer-management.js"></script>
</body>
</html>
